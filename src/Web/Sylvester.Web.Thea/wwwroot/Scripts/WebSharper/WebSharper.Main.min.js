(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;a=self;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JS=c.JS||{};e=a.Error;f=c.NonStandardPromiseRejectionException=c.NonStandardPromiseRejectionException||{};g=c.Promise=c.Promise||{};h=c.Pervasives=c.Pervasives||{};i=b.Json=b.Json||{};j=b.Obj=b.Obj||{};k=b.Remoting=b.Remoting||{};l=k.XhrProvider=k.XhrProvider||{};m=k.AjaxRemotingProvider=k.AjaxRemotingProvider||{};n=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};o=b.HtmlContentExtensions=b.HtmlContentExtensions||{};p=o.SingleNode=o.SingleNode||{};q=o.IControlBody=o.IControlBody||{};r=b.Activator=b.Activator||{};s=a.StartupCode$WebSharper_Main$Html=a.StartupCode$WebSharper_Main$Html||{};t=b.Collections=b.Collections||{};u=t.EqualityComparer=t.EqualityComparer||{};v=b.Comparers=b.Comparers||{};w=v.EquatableEqualityComparer=v.EquatableEqualityComparer||{};x=v.BaseEqualityComparer=v.BaseEqualityComparer||{};y=t.Comparer=t.Comparer||{};z=v.ComparableComparer=v.ComparableComparer||{};A=v.BaseComparer=v.BaseComparer||{};B=b.Operators=b.Operators||{};C=b.Nullable=b.Nullable||{};D=b.Utils=b.Utils||{};E=b.Concurrency=b.Concurrency||{};F=E.CT=E.CT||{};G=E.AsyncBody=E.AsyncBody||{};H=E.Scheduler=E.Scheduler||{};I=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};J=b.Enumerator=b.Enumerator||{};K=J.T=J.T||{};L=c.Optional=c.Optional||{};M=b.Arrays=b.Arrays||{};N=b.Seq=b.Seq||{};O=b.List=b.List||{};P=b.Arrays2D=b.Arrays2D||{};Q=b.CancellationTokenSource=b.CancellationTokenSource||{};R=b.Char=b.Char||{};S=b.Util=b.Util||{};T=b.DateUtil=b.DateUtil||{};U=b.DateTimeOffset=b.DateTimeOffset||{};V=b.Delegate=b.Delegate||{};W=t.DictionaryUtil=t.DictionaryUtil||{};X=t.KeyCollection=t.KeyCollection||{};Y=t.ValueCollection=t.ValueCollection||{};Z=t.Dictionary=t.Dictionary||{};_0=b.Exception=b.Exception||{};_1=b.MatchFailureException=b.MatchFailureException||{};_2=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};_3=b.OperationCanceledException=b.OperationCanceledException||{};_4=b.ArgumentException=b.ArgumentException||{};_5=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_6=b.ArgumentNullException=b.ArgumentNullException||{};_7=b.InvalidOperationException=b.InvalidOperationException||{};_8=b.AggregateException=b.AggregateException||{};_9=b.TimeoutException=b.TimeoutException||{};_=b.FormatException=b.FormatException||{};$=b.OverflowException=b.OverflowException||{};ba=b.TaskCanceledException=b.TaskCanceledException||{};bb=b.KeyNotFoundException=b.KeyNotFoundException||{};bc=a.System=a.System||{};bd=bc.Guid=bc.Guid||{};be=t.HashSetUtil=t.HashSetUtil||{};bf=t.HashSet=t.HashSet||{};bg=bc.Collections=bc.Collections||{};bh=bg.DictionaryEntry=bg.DictionaryEntry||{};bi=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bj=bi.LazyRecord=bi.LazyRecord||{};bk=b.Lazy=b.Lazy||{};bl=O.T=O.T||{};bm=b.Slice=b.Slice||{};bn=b.Option=b.Option||{};bo=b.Queue=b.Queue||{};bp=b.Random=b.Random||{};bq=b.Ref=b.Ref||{};br=b.Result=b.Result||{};bs=b.Control=b.Control||{};bt=b.Stack=b.Stack||{};bu=b.Strings=b.Strings||{};bv=b.Task=b.Task||{};bw=b.Task1=b.Task1||{};bx=b.TaskCompletionSource=b.TaskCompletionSource||{};by=b.Unchecked=b.Unchecked||{};bz=a.Microsoft=a.Microsoft||{};bA=bz.FSharp=bz.FSharp||{};bB=bA.Core=bA.Core||{};bC=bB.FSharpValueOption=bB.FSharpValueOption||{};bD=b.ValueOption=b.ValueOption||{};bE=b.Numeric=b.Numeric||{};bF=a.IntelliFactory;bG=bF&&bF.Runtime;bH=a.Promise;bI=a.JSON;bJ=a.String;bK=a.Date;bL=a.console;bM=a.Math;d.GetFieldValues=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push(bN[bQ]);return bO;};d.GetFieldNames=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push(bQ);return bO;};d.GetFields=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push([bQ,bN[bQ]]);return bO;};f=c.NonStandardPromiseRejectionException=bG.Class({get_Reason:function(){return this.reason;}},e,f);f.New=bG.Ctor(function(bN){this.message="Promise rejected";a.Object.setPrototypeOf(this,f.prototype);this.reason=bN;},f);g.For=function(bN,bO){var bP;function bQ(){return bP.MoveNext()?bO(bP.Current()).then(function(){return bQ();}):bH.resolve(null);}bP=J.Get(bN);return new bH(function(bR){bQ();bR();})["finally"](function(){return bP.Dispose();});};g.AsTask=function(bN){var bO;bO=new bx.New();bN.then(function(bP){return bO.SetResult(bP);},function(bP){return bO.SetException$1(g.unwrapExn(bP));});return bO.get_Task();};g.AsAsync=function(bN){return E.FromContinuations(function(bO,bP){bN.then(bO,function(bQ){return bP(g.unwrapExn(bQ));});});};g.OfTask=function(bN){return new bH(function(bO,bP){bN.ContinueWith$1(function(bQ){return bQ.get_IsCanceled()?bP(new ba.New()):bQ.get_IsFaulted()?bP(bQ.get_Exception()):bO(bQ.get_Result());},E.noneCT());});};g.OfAsync=function(bN){return new bH(function(bO,bP){E.StartWithContinuations(bN,bO,function(bQ){bP(bQ);},function(bQ){bP(bQ);},null);});};g.unwrapExn=function(bN){return bN instanceof e?bN:new f.New(bN);};h.GetJS=function(bN,bO){var bP,bQ;bP=bN;bQ=J.Get(bO);try{while(bQ.MoveNext())bP=bP[bQ.Current()];}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return bP;};h.NewFromSeq=function(bN){var bO,bP,bQ;bO={};bP=J.Get(bN);try{while(bP.MoveNext()){bQ=bP.Current();bO[bQ[0]]=bQ[1];}}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}return bO;};i.Activate=function(bN){var bO,bQ,bR,bS,bT,bU,bV;function bP(bW){var bX,bY,bZ,b0,b1;if(by.Equals(bW,null))return bW;else if(typeof bW=="object"){if(bW instanceof a.Array)return i.shallowMap(bP,bW);else{bX=i.shallowMap(bP,bW.$V);bY=bW.$T;if(bY===void 0)return bX;else{bZ=M.get(bQ,bY);if(bZ===1)return O.ofArray(bX);else if(bZ===2)return self.WebSharper.Decimal.CreateDecimalBits(bX);else{b0=new(M.get(bQ,bY))();for(var b2 in bX)if(function(b3){b0[b3]=bX[b3];return false;}(b2))break;return b0;}}}}else return bW;}bQ=bN?bN.$TYPES:void 0;if(bQ===void 0)bO=bN;else{for(bR=0,bS=M.length(bQ)-1;bR<=bS;bR++){bV=M.get(bQ,bR);switch(!by.Equals(bV,null)&&bV.length===3?M.get(bV,0)==="WebSharper"?M.get(bV,1)==="List"?M.get(bV,2)==="T"?0:(bU=bV,2):(bU=bV,2):(bU=bV,2):!by.Equals(bV,null)&&bV.length===2?M.get(bV,0)==="WebSharper"?M.get(bV,1)==="Decimal"?1:(bU=bV,2):(bU=bV,2):(bU=bV,2)){case 0:bT=1;break;case 1:bT=2;break;case 2:bT=i.lookup(bU);break;}M.set(bQ,bR,bT);}bO=bN.$DATA;}return bP(bO);};i.shallowMap=function(bN,bO){var bP,bQ;if(bO instanceof a.Array)return M.map(bN,bO);else if(typeof bO=="object"){bP={};for(var bR in bO)if(function(bS){bP[bS]=bN(bO[bS]);return false;}(bR))break;return bP;}else return bO;};i.lookup=function(bN){var bO,bP,bQ,bR,bS;bQ=M.length(bN);bO=self;bP=0;while(bP<bQ){bR=M.get(bN,bP);bS=bO[bR];!by.Equals(typeof bS,void 0)?(bO=bS,bP=bP+1):B.FailWith("Invalid server reply. Failed to find type: "+bR);}return bO;};j=b.Obj=bG.Class({Equals:function(bN){return this===bN;},GetHashCode:function(){return -1;}},null,j);j.New=bG.Ctor(function(){},j);l=k.XhrProvider=bG.Class({Sync:function(bN,bO,bP){var bQ;bQ=[null];k.ajax(false,bN,bO,bP,function(bR){bQ[0]=bR;},function(bR){throw bR;},function(){k.ajax(false,bN,bO,bP,function(bR){bQ[0]=bR;},function(bR){throw bR;},void 0);});return bQ[0];},Async:function(bN,bO,bP,bQ,bR){k.ajax(true,bN,bO,bP,bQ,bR,function(){k.ajax(true,bN,bO,bP,bQ,bR,void 0);});}},j,l);l.New=bG.Ctor(function(){j.New.call(this);},l);m=k.AjaxRemotingProvider=bG.Class({get_EndPoint:function(){return k.EndPoint();},AsyncBase:function(bN,bO){var bP,bQ;bP=this;bQ=null;return E.Delay(function(){var bR,bS;bR=k.makeHeaders(bN);bS=k.makePayload(bO);return E.Bind(E.GetCT(),function(bT){return E.FromContinuations(function(bU,bV,bW){var bX,bY,bZ;function b0(b1){return bX[0]?(bX[0]=false,bW(new _3.New(bT))):null;}bX=[true];bY=E.Register(bT,function(){b0();});bZ=bP.get_EndPoint();return k.AjaxProvider().Async(bZ,bR,bS,function(b1){if(bX[0]){bX[0]=false;bY.Dispose();bU(i.Activate(bI.parse(b1)));}},function(b1){if(bX[0]){bX[0]=false;bY.Dispose();bV(b1);}});});});});},Send:function(bN,bO){E.Start(this.AsyncBase(bN,bO),null);},Task:function(bN,bO){return E.StartAsTask(this.AsyncBase(bN,bO),null);},Async:function(bN,bO){return this.AsyncBase(bN,bO);},Sync:function(bN,bO){var bP,bQ,bR;return i.Activate(bI.parse((bP=this.get_EndPoint(),(bQ=k.makeHeaders(bN),(bR=k.makePayload(bO),k.AjaxProvider().Sync(bP,bQ,bR))))));}},j,m);m.New=bG.Ctor(function(){j.New.call(this);},m);k.ajax=function(bN,bO,bP,bQ,bR,bS,bT){var bU,bV,bW;bU=new a.XMLHttpRequest();bV=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bU.open("POST",bO,bN);if(bN==true)bU.withCredentials=true;for(var bY in bP)bU.setRequestHeader(bY,bP[bY]);if(bV)bU.setRequestHeader("x-csrftoken",bV);function bX(){var bZ;if(bU.status==200)bR(bU.responseText);else if(bT&&bU.status==403&&bU.responseText=="CSRF")bT();else{bZ="Response status is not 200: ";bS(new e(bZ+bU.status));}}if("onload"in bU)bU.onload=bU.onerror=bU.onabort=bX;else bU.onreadystatechange=function(){if(bU.readyState==4)bX();};bU.send(bQ);};k.makePayload=function(bN){return bI.stringify(bN);};k.makeHeaders=function(bN){return{"content-type":"application/json","x-websharper-rpc":bN};};k.AjaxProvider=function(){n.$cctor();return n.AjaxProvider;};k.set_AjaxProvider=function(bN){n.$cctor();n.AjaxProvider=bN;};k.UseHttps=function(){try{return!bu.StartsWith(self.location.href,"https://")&&(k.set_EndPoint(bu.Replace(self.location.href,"http://","https://")),true);}catch(bN){return false;}};k.EndPoint=function(){n.$cctor();return n.EndPoint;};k.set_EndPoint=function(bN){n.$cctor();n.EndPoint=bN;};n.$cctor=function(){n.$cctor=a.ignore;n.EndPoint="?";n.AjaxProvider=new l.New();};p=o.SingleNode=bG.Class({ReplaceInDom:function(bN){this.node.parentNode.replaceChild(this.node,bN);}},j,p);p.New=bG.Ctor(function(bN){j.New.call(this);this.node=bN;},p);q.SingleNode=function(bN){return new p.New(bN);};r.Activate=function(){var bN;if(self.document){bN=self.document.getElementById("websharper-data");bN?r.onReady(function(){var bO,bP;function bQ(bT,bU){if(typeof bU=="object"&&"$init"in bU)bU.$preinit(bT);}function bR(bT,bU){if(typeof bU=="object"&&"Body"in bU)bU.Body().ReplaceInDom(self.document.getElementById(bT));else if(typeof bU=="object"&&"$init"in bU)bU.$init(bT);}function bS(bT,bU){if(typeof bU=="object"&&"$init"in bU)bU.$postinit(bT);}bO=i.Activate(bI.parse(bN.getAttribute("content")));r.set_Instances(bO);bP=d.GetFields(bO);M.iter(function(bT){return bQ(bT[0],bT[1]);},bP);M.iter(function(bT){return bR(bT[0],bT[1]);},bP);M.iter(function(bT){return bS(bT[0],bT[1]);},bP);}):void 0;}};r.onReady=function(bN){var bO;function bP(){if(!bO){bO=true;bN();self.document.removeEventListener("DOMContentLoaded",bP,false);self.removeEventListener("load",bP,false);}}bO=false;self.document.readyState==="complete"?bP():(self.document.addEventListener("DOMContentLoaded",bP,false),self.addEventListener("load",bP,false));};r.Instances=function(){s.$cctor();return s.Instances;};r.set_Instances=function(bN){s.$cctor();s.Instances=bN;};r.META_ID=function(){s.$cctor();return s.META_ID;};s.$cctor=function(){s.$cctor=a.ignore;s.META_ID="websharper-data";s.Instances=null;};u=t.EqualityComparer=bG.Class({CGetHashCode0:function(bN){return this.GetHashCode$1(bN);},CEquals0:function(bN,bO){return this.Equals$1(bN,bO);},CGetHashCode:function(bN){return this.GetHashCode$1(bN);},CEquals:function(bN,bO){return this.Equals$1(bN,bO);}},j,u);u.New=bG.Ctor(function(){j.New.call(this);},u);w=v.EquatableEqualityComparer=bG.Class({GetHashCode$1:function(bN){return by.Hash(bN);},Equals$1:function(bN,bO){return bN.EEquals(bO);}},u,w);w.New=bG.Ctor(function(){u.New.call(this);},w);x=v.BaseEqualityComparer=bG.Class({GetHashCode$1:function(bN){return by.Hash(bN);},Equals$1:function(bN,bO){return by.Equals(bN,bO);}},u,x);x.New=bG.Ctor(function(){u.New.call(this);},x);y=t.Comparer=bG.Class({Compare0:function(bN,bO){return this.Compare$1(bN,bO);},Compare:function(bN,bO){return this.Compare$1(bN,bO);}},j,y);y.New=bG.Ctor(function(){j.New.call(this);},y);z=v.ComparableComparer=bG.Class({Compare$1:function(bN,bO){return bN.CompareTo(bO);}},y,z);z.New=bG.Ctor(function(){y.New.call(this);},z);A=v.BaseComparer=bG.Class({Compare$1:function(bN,bO){return by.Compare(bN,bO);}},y,A);A.New=bG.Ctor(function(){y.New.call(this);},A);B.charRange=function(bN,bO){var bP,bQ;bP=bN.charCodeAt();bQ=1+bO.charCodeAt()-bP;return bQ<=0?[]:N.init(bQ,function(bR){return bJ.fromCharCode(bR+bP);});};C.op=function(bN,bO,bP){return bN==null||bO==null?null:bP(bN,bO);};C.opL=function(bN,bO,bP){return bN==null?null:bP(bN,bO);};C.opR=function(bN,bO,bP){return bO==null?null:bP(bN,bO);};C.cmp=function(bN,bO,bP){return bN==null||bO==null?false:bP(bN,bO);};C.cmpE=function(bN,bO,bP){return bN==null?bO==null:bO==null?false:bP(bN,bO);};C.cmpL=function(bN,bO,bP){return bN==null?false:bP(bN,bO);};C.cmpR=function(bN,bO,bP){return bO==null?false:bP(bN,bO);};C.conv=function(bN,bO){return bN==null?null:bO(bN);};D.prettyPrint=function(bN){var bO,bP;function bQ(bR,bS){return bR+" = "+D.prettyPrint(bS);}return bN===null?"null":(bO=typeof bN,bO=="string"?"\""+bN+"\"":bO=="object"?bN instanceof a.Array?"[|"+bu.concat("; ",M.map(D.prettyPrint,bN))+"|]":(bP=bJ(bN),bP==="[object Object]"?"{"+bu.concat("; ",M.map(function(bR){return bQ(bR[0],bR[1]);},d.GetFields(bN)))+"}":bP):bJ(bN));};D.printArray2D=function(bN,bO){return bO===null?"null":"[["+bu.concat("][",N.delay(function(){var bP;bP=bO.length?bO[0].length:0;return N.map(function(bQ){return bu.concat("; ",N.delay(function(){return N.map(function(bR){return bN(M.get2D(bO,bQ,bR));},B.range(0,bP-1));}));},B.range(0,bO.length-1));}))+"]]";};D.printArray=function(bN,bO){return bO===null?"null":"[|"+bu.concat("; ",M.map(bN,bO))+"|]";};D.printList=function(bN,bO){return"["+bu.concat("; ",N.map(bN,bO))+"]";};D.padNumLeft=function(bN,bO){var bP;bP=M.get(bN,0);return bP===" "||bP==="+"||bP==="-"?bP+bu.PadLeftWith(bN.substr(1),bO-1,"0"):bu.PadLeftWith(bN,bO,"0");};D.spaceForPos=function(bN,bO){return 0<=bN?" "+bO:bO;};D.plusForPos=function(bN,bO){return 0<=bN?"+"+bO:bO;};D.toSafe=function(bN){return bN==null?"":bN;};F.New=function(bN,bO){return{c:bN,r:bO};};G.New=function(bN,bO){return{k:bN,ct:bO};};H=E.Scheduler=bG.Class({tick:function(){var bN,bO,bP;bO=this;bP=bK.now();bN=true;while(bN)if(this.robin.length===0){this.idle=true;bN=false;}else{(this.robin.shift())();bK.now()-bP>40?(a.setTimeout(function(){bO.tick();},0),bN=false):void 0;}},Fork:function(bN){var bO;bO=this;this.robin.push(bN);this.idle?(this.idle=false,a.setTimeout(function(){bO.tick();},0)):void 0;}},j,H);H.New=bG.Ctor(function(){j.New.call(this);this.idle=true;this.robin=[];},H);E.For=function(bN,bO){return E.Using(J.Get(bN),function(bP){return E.While(function(){return bP.MoveNext();},E.Delay(function(){return bO(bP.Current());}));});};E.While=function(bN,bO){return bN()?E.Bind(bO,function(){return E.While(bN,bO);}):E.Return();};E.Using=function(bN,bO){return E.TryFinally(bO(bN),function(){bN.Dispose();});};E.TryCancelled=function(bN,bO){return function(bP){bN(G.New(function(bQ){if(bQ.$==2){bO(bQ.$0);bP.k(bQ);}else bP.k(bQ);},bP.ct));};};E.OnCancel=function(bN){return function(bO){bO.k({$:0,$0:E.Register(bO.ct,bN)});};};E.StartChildAsTask=function(bN){return function(bO){(E.StartChild(bN,null))(G.New(function(bP){if(bP.$==0)bO.k({$:0,$0:E.StartImmediateAsTask(bP.$0,{$:1,$0:bO.ct})});},bO.ct));};};E.StartChild=function(bN,bO){return function(bP){var bQ,bR,bS,bT;bQ=[true];bR=[null];bS=[];bT=bO!=null&&bO.$==1?{$:1,$0:a.setTimeout(function(){var bU;bQ[0]=false;bU={$:1,$0:new _9.New()};while(bS.length>0)(bS.shift())(bU);},bO.$0)}:null;E.scheduler().Fork(function(){if(!bP.ct.c)bN(G.New(function(bU){if(bQ[0]){bR[0]={$:1,$0:bU};bT!=null&&bT.$==1?a.clearTimeout(bT.$0):void 0;while(bS.length>0)(bS.shift())(bU);}},bP.ct));});bP.k({$:0,$0:function(bU){var bV;if(bQ[0]){bV=bR[0];bV==null?bS.push(bU.k):bU.k(bV.$0);}else bU.k({$:1,$0:new _9.New()});}});};};E.Sequential=function(bN){var bO;bO=M.ofSeq(bN);return M.length(bO)===0?E.Return([]):function(bP){var bQ,bR;function bS(bU){var bV;while(true){bV=function(bW){return function(){(M.get(bO,bW))(G.New(function(bX){return bT(bW,bX);},bP.ct));};}(bU);return E.scheduler().Fork(bV);}}function bT(bU,bV){return bV.$==0?(M.set(bR,bU,bV.$0),bU===bQ-1?bP.k({$:0,$0:bR}):bP.ct.c?E.cancel(bP):bS(bU+1)):bP.k(bV);}bQ=bO.length;bR=new a.Array(bQ);bS(0);};};E.ParallelWithMaxDegree=function(bN,bO){var bP;bO<=0?B.InvalidArg("maxDegreeOfParallelism","maxDegreeOfParallelism must be positive, was "+bJ(bO)):void 0;bP=M.ofSeq(bN);return M.length(bP)===0?E.Return([]):function(bQ){var bT,bU,bV,bW,bX;function bR(bY){E.scheduler().Fork(function(){(M.get(bP,bY))(G.New(bS(bY),bQ.ct));});}function bS(bY){return function(bZ){var b0,b1,b2;b1=bU[0];switch(b1===0?0:b1===1?bZ.$==0?1:(b0=[b1,bZ],3):bZ.$==0?2:(b0=[b1,bZ],3)){case 0:return null;case 1:M.set(bV,bY,bZ.$0);bU[0]=0;return bQ.k({$:0,$0:bV});case 2:return bQ.ct.c?(bU[0]=0,E.cancel(bQ)):(M.set(bV,bY,bZ.$0),bU[0]=b1-1,b2=bT-b1+bO,b2<bT?bR(b2):null);case 3:bU[0]=0;return bQ.k(b0[1]);}};}bT=bP.length;bU=[bT];bV=new a.Array(bT);for(bW=0,bX=(by.Compare(bO,bT)===-1?bO:bT)-1;bW<=bX;bW++)bR(bW);};};E.Parallel=function(bN){var bO;bO=M.ofSeq(bN);return M.length(bO)===0?E.Return([]):function(bP){var bR,bS,bT,bU,bV;function bQ(bW,bX){var bY,bZ;bZ=bS[0];switch(bZ===0?0:bZ===1?bX.$==0?1:(bY=bX,3):bX.$==0?2:(bY=bX,3)){case 0:return null;case 1:M.set(bT,bW,bX.$0);bS[0]=0;return bP.k({$:0,$0:bT});case 2:M.set(bT,bW,bX.$0);{bS[0]=bZ-1;return;}break;case 3:bS[0]=0;return bP.k(bY);}}bR=bO.length;bS=[bR];bT=new a.Array(bR);for(bU=0,bV=bR-1;bU<=bV;bU++)(function(bW){return E.scheduler().Fork(function(){(M.get(bO,bW))(G.New(function(bX){return bQ(bW,bX);},bP.ct));});}(bU));};};E.Sleep=function(bN){return function(bO){var bP,bQ;bP=void 0;bQ=void 0;bP=a.setTimeout(function(){bQ.Dispose();E.scheduler().Fork(function(){bO.k({$:0,$0:null});});},bN);bQ=E.Register(bO.ct,function(){a.clearTimeout(bP);E.scheduler().Fork(function(){E.cancel(bO);});});};};E.StartImmediateAsTask=function(bN,bO){var bP;bP=new bx.New();E.StartWithContinuations(bN,function(bQ){bP.SetResult(bQ);},function(bQ){bP.SetException$1(bQ);},function(){bP.SetCanceled();},bO);return bP.get_Task();};E.StartAsTask=function(bN,bO){var bP;bP=new bx.New();E.scheduler().Fork(function(){E.StartWithContinuations(bN,function(bQ){bP.SetResult(bQ);},function(bQ){bP.SetException$1(bQ);},function(){bP.SetCanceled();},bO);});return bP.get_Task();};E.AwaitTask1=function(bN){return E.FromContinuations(function(bO,bP,bQ){bN.get_Status()===0?bN.Start():void 0;bN.ContinueWith$1(function(bR){return bR.get_IsCanceled()?bQ(new _3.New(E.noneCT())):bR.get_IsFaulted()?bP(bR.get_Exception()):bO(bR.get_Result());},E.noneCT());});};E.AwaitTask=function(bN){return E.FromContinuations(function(bO,bP,bQ){bN.get_Status()===0?bN.Start():void 0;bN.ContinueWith$1(function(bR){return bR.get_IsCanceled()?bQ(new _3.New(E.noneCT())):bR.get_IsFaulted()?bP(bR.get_Exception()):bO();},E.noneCT());});};E.AwaitEvent=function(bN,bO){return function(bP){var bQ,bR;bQ=void 0;bR=void 0;bQ=bN.Subscribe(S.observer(function(bS){bQ.Dispose();bR.Dispose();E.scheduler().Fork(function(){bP.k({$:0,$0:bS});});}));bR=E.Register(bP.ct,function(){if(bO!=null&&bO.$==1)bO.$0();else{bQ.Dispose();E.scheduler().Fork(function(){E.cancel(bP);});}});};};E.StartImmediate=function(bN,bO){var bP,bQ;bP=(bQ=(E.defCTS())[0],bO==null?bQ:bO.$0);!bP.c?bN(G.New(function(bR){if(bR.$==1)E.UncaughtAsyncError(bR.$0);},bP)):void 0;};E.Start=function(bN,bO){var bP,bQ;bP=(bQ=(E.defCTS())[0],bO==null?bQ:bO.$0);E.scheduler().Fork(function(){if(!bP.c)bN(G.New(function(bR){if(bR.$==1)E.UncaughtAsyncError(bR.$0);},bP));});};E.UncaughtAsyncError=function(bN){bL.log("WebSharper: Uncaught asynchronous exception",bN);};E.StartWithContinuations=function(bN,bO,bP,bQ,bR){var bS,bT;bS=(bT=(E.defCTS())[0],bR==null?bT:bR.$0);!bS.c?bN(G.New(function(bU){if(bU.$==1)bP(bU.$0);else if(bU.$==2)bQ(bU.$0);else bO(bU.$0);},bS)):void 0;};E.FromContinuations=function(bN){return function(bO){var bP;function bQ(bR){if(bP[0])B.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bP[0]=true;E.scheduler().Fork(bR);}}bP=[false];bN(function(bR){bQ(function(){bO.k({$:0,$0:bR});});},function(bR){bQ(function(){bO.k({$:1,$0:bR});});},function(bR){bQ(function(){bO.k({$:2,$0:bR});});});};};E.GetCT=function(){I.$cctor();return I.GetCT;};E.Catch=function(bN){return function(bO){try{bN(G.New(function(bP){if(bP.$==0)bO.k({$:0,$0:{$:0,$0:bP.$0}});else if(bP.$==1)bO.k({$:0,$0:{$:1,$0:bP.$0}});else bO.k(bP);},bO.ct));}catch(bP){bO.k({$:0,$0:{$:1,$0:bP}});}};};E.TryWith=function(bN,bO){return function(bP){bN(G.New(function(bQ){if(bQ.$==0)bP.k({$:0,$0:bQ.$0});else if(bQ.$==1)try{(bO(bQ.$0))(bP);}catch(bR){bP.k(bQ);}else bP.k(bQ);},bP.ct));};};E.TryFinally=function(bN,bO){return function(bP){bN(G.New(function(bQ){try{bO();bP.k(bQ);}catch(bR){bP.k({$:1,$0:bR});}},bP.ct));};};E.Delay=function(bN){return function(bO){try{(bN(null))(bO);}catch(bP){bO.k({$:1,$0:bP});}};};E.Combine=function(bN,bO){return E.Bind(bN,function(){return bO;});};E.Bind=function(bN,bO){return E.checkCancel(function(bP){bN(G.New(function(bQ){var bR;if(bQ.$==0){bR=bQ.$0;E.scheduler().Fork(function(){try{(bO(bR))(bP);}catch(bS){bP.k({$:1,$0:bS});}});}else E.scheduler().Fork(function(){bP.k(bQ);});},bP.ct));});};E.Zero=function(){I.$cctor();return I.Zero;};E.Return=function(bN){return function(bO){bO.k({$:0,$0:bN});};};E.checkCancel=function(bN){return function(bO){if(bO.ct.c)E.cancel(bO);else bN(bO);};};E.cancel=function(bN){bN.k({$:2,$0:new _3.New(bN.ct)});};E.defCTS=function(){I.$cctor();return I.defCTS;};E.scheduler=function(){I.$cctor();return I.scheduler;};E.Register=function(bN,bO){var bP;return bN===E.noneCT()?{Dispose:function(){return null;}}:(bP=bN.r.push(bO)-1,{Dispose:function(){return M.set(bN.r,bP,a.ignore);}});};E.noneCT=function(){I.$cctor();return I.noneCT;};I.$cctor=function(){I.$cctor=a.ignore;I.noneCT=F.New(false,[]);I.scheduler=new H.New();I.defCTS=[new Q.New()];I.Zero=E.Return();I.GetCT=function(bN){bN.k({$:0,$0:bN.ct});};};K=J.T=bG.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},j,K);K.New=bG.Ctor(function(bN,bO,bP,bQ){j.New.call(this);this.s=bN;this.c=bO;this.n=bP;this.d=bQ;},K);J.Get0=function(bN){return bN instanceof a.Array?J.ArrayEnumerator(bN):by.Equals(typeof bN,"string")?J.StringEnumerator(bN):"GetEnumerator0"in bN?bN.GetEnumerator0():bN.GetEnumerator();};J.Get=function(bN){return bN instanceof a.Array?J.ArrayEnumerator(bN):by.Equals(typeof bN,"string")?J.StringEnumerator(bN):bN.GetEnumerator();};J.StringEnumerator=function(bN){return new K.New(0,null,function(bO){var bP;bP=bO.s;return bP<bN.length&&(bO.c=bN[bP],bO.s=bP+1,true);},void 0);};J.ArrayEnumerator=function(bN){return new K.New(0,null,function(bO){var bP;bP=bO.s;return bP<M.length(bN)&&(bO.c=M.get(bN,bP),bO.s=bP+1,true);},void 0);};L.Undefined={$:0};M.splitInto=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV,bW,bX;if(bN<=0)B.FailWith("Count must be positive");bQ=M.length(bO);if(bQ===0)return[];else{bR=by.Compare(bN,bQ)===-1?bN:bQ;bS=M.create(bR,null);bT=bQ/bR>>0;bP=0;for(bU=0,bV=bQ%bR-1;bU<=bV;bU++){bS[bU]=M.sub(bO,bP,bT+1);bP=bP+bT+1;}for(bW=bQ%bR,bX=bR-1;bW<=bX;bW++){bS[bW]=M.sub(bO,bP,bT);bP=bP+bT;}return bS;}};M.contains=function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=M.length(bO);while(bP&&bQ<bS)if(by.Equals(bO[bQ],bN))bP=false;else bQ=bQ+1;return!bP;};M.tryFindBack=function(bN,bO){var bP,bQ,bR;bP=null;bQ=bO.length-1;while(bQ>=0&&bP==null){bR=bO[bQ];bN(bR)?bP={$:1,$0:bR}:void 0;bQ=bQ-1;}return bP;};M.tryFindIndexBack=function(bN,bO){var bP,bQ;bP=null;bQ=bO.length-1;while(bQ>=0&&bP==null){bN(M.get(bO,bQ))?bP={$:1,$0:bQ}:void 0;bQ=bQ-1;}return bP;};M.mapFold=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bR=new a.Array(bP.length);bQ=bO;for(bS=0,bT=bP.length-1;bS<=bT;bS++){bU=bN(bQ,bP[bS]);bR[bS]=bU[0];bQ=bU[1];}return[bR,bQ];};M.mapFoldBack=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV,bW,bX;bS=new a.Array(bO.length);bQ=bP;bT=bO.length;for(bU=1,bV=bT;bU<=bV;bU++){bW=bT-bU;bX=bN(bO[bW],bQ);bS[bW]=bX[0];bQ=bX[1];}return[bS,bQ];};M.mapInPlace=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bO[bP]=bN(bO[bP]);};M.mapiInPlace=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bO[bP]=bN(bP,bO[bP]);return bO;};M.sortInPlaceByDescending=function(bN,bO){M.mapInPlace(function(bP){return bP[0];},M.mapiInPlace(function(bP,bQ){return[bQ,[bN(bQ),bP]];},bO).sort(function(bP,bQ){return-by.Compare(bP[1],bQ[1]);}));};N.tryHead=function(bN){var bO;bO=J.Get(bN);try{return bO.MoveNext()?{$:1,$0:bO.Current()}:null;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.tryItem=function(bN,bO){var bP,bQ,bR;if(bN<0)return null;else{bP=0;bQ=J.Get(bO);try{bR=true;while(bR&&bP<=bN)if(bQ.MoveNext())bP=bP+1;else bR=false;return bR?{$:1,$0:bQ.Current()}:null;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};N.tryLast=function(bN){var bO,bP;bO=J.Get(bN);try{if(bO.MoveNext()){while(bO.MoveNext());bP={$:1,$0:bO.Current()};}else bP=null;return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.chunkBySize=function(bN,bO){bN<=0?B.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(true,null,function(bQ){var bR;if(bQ.s&&bP.MoveNext()){bR=[bP.Current()];while(bQ.s&&M.length(bR)<bN)if(bP.MoveNext())bR.push(bP.Current());else bQ.s=false;bQ.c=bR;return true;}else return false;},function(){bP.Dispose();});}};};M.countBy=function(bN,bO){var bP,bQ,bR,bS,bT;bP=new Z.New$5();bQ=[];for(bR=0,bS=M.length(bO)-1;bR<=bS;bR++){bT=bN(bO[bR]);bP.ContainsKey(bT)?bP.set_Item(bT,bP.get_Item(bT)+1):(bQ.push(bT),bP.Add(bT,1));}M.mapInPlace(function(bU){return[bU,bP.get_Item(bU)];},bQ);return bQ;};N.except=function(bN,bO){return{GetEnumerator:function(){var bP,bQ;bP=J.Get(bO);bQ=new bf.New$2(bN);return new K.New(null,null,function(bR){var bS,bT;if(bP.MoveNext()){bS=bP.Current();bT=bQ.Add(bS);while(!bT&&bP.MoveNext()){bS=bP.Current();bT=bQ.Add(bS);}return bT&&(bR.c=bS,true);}else return false;},function(){bP.Dispose();});}};};O.skip=function(bN,bO){var bP,bQ,bR;bP=bO;for(bQ=1,bR=bN;bQ<=bR;bQ++)if(bP.$==0)B.FailWith("Input list too short.");else bP=bP.$1;return bP;};M.groupBy=function(bN,bO){var bP,bQ,bR,bS,bT,bU;bP=new Z.New$5();bQ=[];for(bR=0,bS=M.length(bO)-1;bR<=bS;bR++){bT=bO[bR];bU=bN(bT);bP.ContainsKey(bU)?bP.get_Item(bU).push(bT):(bQ.push(bU),bP.Add(bU,[bT]));}M.mapInPlace(function(bV){return[bV,bP.get_Item(bV)];},bQ);return bQ;};N.insufficient=function(){return B.FailWith("The input sequence has an insufficient number of elements.");};N.last=function(bN){var bO,bP;bO=J.Get(bN);try{if(!bO.MoveNext())bP=N.insufficient();else{while(bO.MoveNext());bP=bO.Current();}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.contains=function(bN,bO){var bP,bQ;bP=J.Get(bO);try{bQ=false;while(!bQ&&bP.MoveNext())bQ=by.Equals(bP.Current(),bN);return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.skipWhile=function(bN,bO){var bP;bP=bO;while(!(bP.$==0)&&bN(O.head(bP)))bP=O.tail(bP);return bP;};N.nonNegative=function(){return B.FailWith("The input must be non-negative.");};M.transposeArray=function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV,bW;bO=M.length(bN);if(bO===0)return[];else{bP=M.length(M.get(bN,0));for(bQ=1,bR=bO-1;bQ<=bR;bQ++)if(bP!==M.length(M.get(bN,bQ)))B.FailWith("The arrays have different lengths.");bS=new a.Array(bP);for(bT=0,bU=bP-1;bT<=bU;bT++){bS[bT]=new a.Array(bO);for(bV=0,bW=bO-1;bV<=bW;bV++)bS[bT][bV]=M.get(M.get(bN,bV),bT);}return bS;}};M.checkBounds=function(bN,bO){if(bO<0||bO>=bN.length)B.FailWith("Index was outside the bounds of the array.");};M.checkBounds2D=function(bN,bO,bP){if(bO<0||bP<0||bO>=bN.length||bP>=(bN.length?bN[0].length:0))throw new _2.New();};M.checkRange=function(bN,bO,bP){if(bP<0||bO<0||bN.length<bO+bP)B.FailWith("Index was outside the bounds of the array.");};M.set=function(bN,bO,bP){M.checkBounds(bN,bO);bN[bO]=bP;};M.get=function(bN,bO){M.checkBounds(bN,bO);return bN[bO];};M.sub=function(bN,bO,bP){M.checkRange(bN,bO,bP);return bN.slice(bO,bO+bP);};M.setSub=function(bN,bO,bP,bQ){var bR,bS;for(bR=0,bS=bP-1;bR<=bS;bR++)M.set(bN,bO+bR,M.get(bQ,bR));};M.get2D=function(bN,bO,bP){M.checkBounds2D(bN,bO,bP);return bN[bO][bP];};M.set2D=function(bN,bO,bP,bQ){M.checkBounds2D(bN,bO,bP);bN[bO][bP]=bQ;};M.zeroCreate2D=function(bN,bO){var bP;bP=M.init(bN,function(){return M.create(bO,null);});bP.dims=2;return bP;};M.sub2D=function(bN,bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX,bY;bS=bQ<0?0:bQ;bT=bR<0?0:bR;bU=M.zeroCreate2D(bS,bT);for(bV=0,bW=bS-1;bV<=bW;bV++){for(bX=0,bY=bT-1;bX<=bY;bX++)M.set2D(bU,bV,bX,M.get2D(bN,bO+bV,bP+bX));}return bU;};M.setSub2D=function(bN,bO,bP,bQ,bR,bS){var bT,bU,bV,bW;for(bT=0,bU=bQ-1;bT<=bU;bT++){for(bV=0,bW=bR-1;bV<=bW;bV++)M.set2D(bN,bO+bT,bP+bV,M.get2D(bS,bT,bV));}};M.length=function(bN){return bN.dims===2?bN.length*bN.length:bN.length;};b.checkThis=function(bN){return by.Equals(bN,null)?B.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bN;};M.binarySearch=function(bN,bO,bP,bQ){function bR(bS,bT){var bU,bV;while(true)if(bS>bT)return~bS;else{bU=(bS+bT)/2>>0;bV=bO(M.get(bN,bU));if(bS===bT)return bV===0?bS:bV>0?~(bS+1):~bS;else if(bV<=0)bT=bU;else bS=bU+1;}}if(bP<0)throw new _5.New("index","Non-negative number required.");else null;if(bQ>M.length(bN))throw new _4.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");else null;if(bQ<bP)throw new _5.New("length","Non-negative number required.");else null;return bR(bP,bQ-1);};M.binarySearchComparer=function(bN){return bN.CompareTo0?function(bO){return bN.CompareTo0(bO);}:function(bO){if(bO.CompareTo0)return-bO.CompareTo0(bN);else throw new _7.New$2("Failed to compare two elements in the array.",new _4.New$2("At least one object must implement IComparable."));};};M.sortInternal=function(bN,bO,bP,bQ,bR){function bS(bU,bV){var bW,bX,bY,bZ;bX=bN[bV];bW=bU-1;for(bY=bU,bZ=bV-1;bY<=bZ;bY++)if(bQ(bN[bY],bX)<0){bW=bW+1;bR(bW,bY);}bQ(bN[bV],bN[bW+1])<0?bR(bW+1,bV):void 0;return bW+1;}function bT(bU,bV){var bW;while(true)if(bU<bV){bW=bS(bU,bV);bT(bU,bW-1);bU=bW+1;}else return null;}bT(bO,bO+bP-1);};M.sortSub=function(bN,bO,bP,bQ){M.sortInternal(bN,bO,bP,bQ,function(bR,bS){var bT;bT=bN[bR];bN[bR]=bN[bS];bN[bS]=bT;});};M.sortByKeys=function(bN,bO,bP,bQ,bR){M.sortInternal(bN,bP,bQ,bR,function(bS,bT){var bU,bV;bU=bN[bS];bN[bS]=bN[bT];bN[bT]=bU;bV=bO[bS];bO[bS]=bO[bT];bO[bT]=bV;});};M.clear=function(bN,bO,bP){var bQ,bR;if(bN==null)throw new _6.New$1("array");else void 0;if(bO<0||bP<0||bO+bP>M.length(bN))throw new _2.New();else void 0;for(bQ=bO,bR=bO+bP-1;bQ<=bR;bQ++)bN[bQ]=typeof bN[bQ]=="number"?0:null;};M.constrainedCopy=function(bN,bO,bP,bQ,bR){if(bN===bP&&bQ<=bO+bR)M.blit(M.init(bR,function(bS){return M.get(bN,bO+bS);}),0,bP,bQ,bR);else M.blit(bN,bO,bP,bQ,bR);};M.findIndexBound=function(bN,bO,bP,bQ){function bR(bS,bT){while(true)if(bT===bS)return -1;else if(bQ(M.get(bN,bT)))return bT;else bT=bT+1;}if(bN==null)throw new _6.New$1("array");else null;if(bQ==null)throw new _6.New$1("match");else null;if(bO<0)throw new _5.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bP<0||bO+bP>M.length(bN))throw new _5.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;return bR(bO+bP,bO);};M.findLastIndexBound=function(bN,bO,bP,bQ){function bR(bS){while(true)if(bS<bO)return -1;else if(bQ(M.get(bN,bS)))return bS;else bS=bS-1;}if(bN==null)throw new _6.New$1("array");else null;if(bQ==null)throw new _6.New$1("match");else null;if(bO<0)throw new _5.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bP<0||bO+bP>M.length(bN))throw new _5.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;return bR(bO+bP-1);};M.reverse=function(bN,bO,bP){var bQ;bQ=M.sub(bN,bO,bP).slice().reverse();M.blit(bQ,0,bN,bO,M.length(bQ));};M.sum=function(bN){var bO,bP;bO=0;bP=0;for(;bP<bN.length;bP++)bO+=bN[bP];return bO;};M.sumBy=function(bN,bO){var bP,bQ;bP=0;bQ=0;for(;bQ<bO.length;bQ++)bP+=bN(bO[bQ]);return bP;};M.allPairs=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV;bP=bN.length;bQ=bO.length;bR=new a.Array(bP*bQ);for(bS=0,bT=bP-1;bS<=bT;bS++){for(bU=0,bV=bQ-1;bU<=bV;bU++)bR[bS*bQ+bU]=[bN[bS],bO[bU]];}return bR;};M.average=function(bN){return a.Number(M.sum(bN))/bN.length;};M.averageBy=function(bN,bO){return a.Number(M.sumBy(bN,bO))/bO.length;};M.blit=function(bN,bO,bP,bQ,bR){var bS,bT;M.checkRange(bN,bO,bR);M.checkRange(bP,bQ,bR);for(bS=0,bT=bR-1;bS<=bT;bS++)bP[bQ+bS]=bN[bO+bS];};M.choose=function(bN,bO){var bP,bQ,bR,bS;bP=[];for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++){bS=bN(bO[bQ]);bS==null?void 0:bP.push(bS.$0);}return bP;};M.collect=function(bN,bO){return a.Array.prototype.concat.apply([],M.map(bN,bO));};M.concat=function(bN){return a.Array.prototype.concat.apply([],M.ofSeq(bN));};M.create=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bN);for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bP[bQ]=bO;return bP;};M.exists=function(bN,bO){var bP,bQ,bR,bS;bP=false;bQ=0;bS=M.length(bO);while(!bP&&bQ<bS)if(bN(bO[bQ]))bP=true;else bQ=bQ+1;return bP;};M.exists2=function(bN,bO,bP){var bQ,bR,bS,bT;M.checkLength(bO,bP);bQ=false;bR=0;bT=M.length(bO);while(!bQ&&bR<bT)if(bN(bO[bR],bP[bR]))bQ=true;else bR=bR+1;return bQ;};M.fill=function(bN,bO,bP,bQ){var bR,bS;M.checkRange(bN,bO,bP);for(bR=bO,bS=bO+bP-1;bR<=bS;bR++)bN[bR]=bQ;};M.filter=function(bN,bO){var bP,bQ,bR;bP=[];for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)if(bN(bO[bQ]))bP.push(bO[bQ]);return bP;};M.find=function(bN,bO){var bP;bP=M.tryFind(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.findIndex=function(bN,bO){var bP;bP=M.tryFindIndex(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.fold=function(bN,bO,bP){var bQ,bR,bS;bQ=bO;for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ=bN(bQ,bP[bR]);return bQ;};M.fold2=function(bN,bO,bP,bQ){var bR,bS,bT;M.checkLength(bP,bQ);bR=bO;for(bS=0,bT=bP.length-1;bS<=bT;bS++)bR=bN(bR,bP[bS],bQ[bS]);return bR;};M.foldBack=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=bP;bS=bO.length;for(bT=1,bU=bS;bT<=bU;bT++)bQ=bN(bO[bS-bT],bQ);return bQ;};M.foldBack2=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV;M.checkLength(bO,bP);bT=bO.length;bS=bQ;for(bU=1,bV=bT;bU<=bV;bU++)bS=bN(bO[bT-bU],bP[bT-bU],bS);return bS;};M.forall=function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=M.length(bO);while(bP&&bQ<bS)if(bN(bO[bQ]))bQ=bQ+1;else bP=false;return bP;};M.forall2=function(bN,bO,bP){var bQ,bR,bS,bT;M.checkLength(bO,bP);bQ=true;bR=0;bT=M.length(bO);while(bQ&&bR<bT)if(bN(bO[bR],bP[bR]))bR=bR+1;else bQ=false;return bQ;};M.init=function(bN,bO){var bP,bQ,bR;bN<0?B.FailWith("Negative size given."):null;bP=new a.Array(bN);for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bP[bQ]=bO(bQ);return bP;};M.iter=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bN(bO[bP]);};M.iter2=function(bN,bO,bP){var bQ,bR;M.checkLength(bO,bP);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bN(bO[bQ],bP[bQ]);};M.iteri=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bN(bP,bO[bP]);};M.iteri2=function(bN,bO,bP){var bQ,bR;M.checkLength(bO,bP);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bN(bQ,bO[bQ],bP[bQ]);};M.map=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bO.length);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP[bQ]=bN(bO[bQ]);return bP;};M.map2=function(bN,bO,bP){var bQ,bR,bS;M.checkLength(bO,bP);bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR]=bN(bO[bR],bP[bR]);return bQ;};M.mapi=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bO.length);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP[bQ]=bN(bQ,bO[bQ]);return bP;};M.mapi2=function(bN,bO,bP){var bQ,bR,bS;M.checkLength(bO,bP);bQ=new a.Array(bO.length);for(bR=0,bS=bO.length-1;bR<=bS;bR++)bQ[bR]=bN(bR,bO[bR],bP[bR]);return bQ;};M.max=function(bN){var bO,bP,bQ,bR;M.nonEmpty(bN);bO=bN[0];for(bP=1,bQ=bN.length-1;bP<=bQ;bP++){bR=bN[bP];by.Compare(bR,bO)===1?bO=bR:void 0;}return bO;};M.maxBy=function(bN,bO){var bP,bQ,bR,bS,bT,bU;M.nonEmpty(bO);bP=bO[0];bQ=bN(bP);for(bR=1,bS=bO.length-1;bR<=bS;bR++){bT=bO[bR];bU=bN(bT);by.Compare(bU,bQ)===1?(bP=bT,bQ=bU):void 0;}return bP;};M.min=function(bN){var bO,bP,bQ,bR;M.nonEmpty(bN);bO=bN[0];for(bP=1,bQ=bN.length-1;bP<=bQ;bP++){bR=bN[bP];by.Compare(bR,bO)===-1?bO=bR:void 0;}return bO;};M.minBy=function(bN,bO){var bP,bQ,bR,bS,bT,bU;M.nonEmpty(bO);bP=bO[0];bQ=bN(bP);for(bR=1,bS=bO.length-1;bR<=bS;bR++){bT=bO[bR];bU=bN(bT);by.Compare(bU,bQ)===-1?(bP=bT,bQ=bU):void 0;}return bP;};M.ofList=function(bN){var bO,bP;bP=[];bO=bN;while(!(bO.$==0)){bP.push(O.head(bO));bO=O.tail(bO);}return bP;};M.ofSeq=function(bN){var bO,bP;if(bN instanceof a.Array)return bN.slice();else if(bN instanceof bl)return M.ofList(bN);else{bO=[];bP=J.Get(bN);try{while(bP.MoveNext())bO.push(bP.Current());return bO;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}}};M.partition=function(bN,bO){var bP,bQ,bR,bS;bP=[];bQ=[];for(bR=0,bS=bO.length-1;bR<=bS;bR++)if(bN(bO[bR]))bP.push(bO[bR]);else bQ.push(bO[bR]);return[bP,bQ];};M.permute=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bO.length);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP[bN(bQ)]=bO[bQ];return bP;};M.pick=function(bN,bO){var bP;bP=M.tryPick(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.reduce=function(bN,bO){var bP,bQ,bR;M.nonEmpty(bO);bP=bO[0];for(bQ=1,bR=bO.length-1;bQ<=bR;bQ++)bP=bN(bP,bO[bQ]);return bP;};M.reduceBack=function(bN,bO){var bP,bQ,bR,bS,bT;M.nonEmpty(bO);bR=bO.length;bQ=bO[bR-1];for(bS=2,bT=bR;bS<=bT;bS++)bQ=bN(bO[bR-bS],bQ);return bQ;};M.scan=function(bN,bO,bP){var bQ,bR,bS;bQ=new a.Array(1+bP.length);bQ[0]=bO;for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR+1]=bN(bQ[bR],bP[bR]);return bQ;};M.scanBack=function(bN,bO,bP){var bQ,bR,bS,bT;bQ=bO.length;bR=new a.Array(1+bQ);bR[bQ]=bP;for(bS=0,bT=bQ-1;bS<=bT;bS++)bR[bQ-bS-1]=bN(bO[bQ-bS-1],bR[bQ-bS]);return bR;};M.sort=function(bN){return M.map(function(bO){return bO[0];},M.mapi(function(bO,bP){return[bP,bO];},bN).sort(by.Compare));};M.sortBy=function(bN,bO){return M.map(function(bP){return bP[0];},M.mapi(function(bP,bQ){return[bQ,[bN(bQ),bP]];},bO).sort(function(bP,bQ){return by.Compare(bP[1],bQ[1]);}));};M.sortInPlace=function(bN){M.mapInPlace(function(bO){return bO[0];},M.mapiInPlace(function(bO,bP){return[bP,bO];},bN).sort(by.Compare));};M.sortInPlaceBy=function(bN,bO){M.mapInPlace(function(bP){return bP[0];},M.mapiInPlace(function(bP,bQ){return[bQ,[bN(bQ),bP]];},bO).sort(function(bP,bQ){return by.Compare(bP[1],bQ[1]);}));};M.sortInPlaceWith=function(bN,bO){bO.sort(bN);};M.sortWith=function(bN,bO){return bO.slice().sort(bN);};M.sortByDescending=function(bN,bO){return M.map(function(bP){return bP[0];},M.mapi(function(bP,bQ){return[bQ,[bN(bQ),bP]];},bO).sort(function(bP,bQ){return-by.Compare(bP[1],bQ[1]);}));};M.sortDescending=function(bN){return M.map(function(bO){return bO[0];},M.mapi(function(bO,bP){return[bP,bO];},bN).sort(function(bO,bP){return-by.Compare(bO,bP);}));};M.transpose=function(bN){return bN instanceof a.Array?M.transposeArray(bN):M.transposeArray(M.ofSeq(bN));};M.tryFind=function(bN,bO){var bP,bQ;bP=null;bQ=0;while(bQ<bO.length&&bP==null){bN(bO[bQ])?bP={$:1,$0:bO[bQ]}:void 0;bQ=bQ+1;}return bP;};M.tryFindIndex=function(bN,bO){var bP,bQ;bP=null;bQ=0;while(bQ<bO.length&&bP==null){bN(bO[bQ])?bP={$:1,$0:bQ}:void 0;bQ=bQ+1;}return bP;};M.tryHead=function(bN){return bN.length===0?null:{$:1,$0:bN[0]};};M.tryItem=function(bN,bO){return bO.length<=bN||bN<0?null:{$:1,$0:bO[bN]};};M.tryLast=function(bN){var bO;bO=bN.length;return bO===0?null:{$:1,$0:bN[bO-1]};};M.tryPick=function(bN,bO){var bP,bQ,bR;bP=null;bQ=0;while(bQ<bO.length&&bP==null){bR=bN(bO[bQ]);bR!=null&&bR.$==1?bP=bR:void 0;bQ=bQ+1;}return bP;};M.unzip=function(bN){var bO,bP,bQ,bR,bS;bO=[];bP=[];for(bQ=0,bR=bN.length-1;bQ<=bR;bQ++){bS=bN[bQ];bO.push(bS[0]);bP.push(bS[1]);}return[bO,bP];};M.unzip3=function(bN){var bO,bP,bQ,bR,bS,bT;bO=[];bP=[];bQ=[];for(bR=0,bS=bN.length-1;bR<=bS;bR++){bT=bN[bR];bO.push(bT[0]);bP.push(bT[1]);bQ.push(bT[2]);}return[bO,bP,bQ];};M.zip=function(bN,bO){var bP,bQ,bR;M.checkLength(bN,bO);bP=M.create(bN.length,null);for(bQ=0,bR=bN.length-1;bQ<=bR;bQ++)bP[bQ]=[bN[bQ],bO[bQ]];return bP;};M.zip3=function(bN,bO,bP){var bQ,bR,bS;M.checkLength(bN,bO);M.checkLength(bO,bP);bQ=M.create(bN.length,null);for(bR=0,bS=bN.length-1;bR<=bS;bR++)bQ[bR]=[bN[bR],bO[bR],bP[bR]];return bQ;};M.chunkBySize=function(bN,bO){return M.ofSeq(N.chunkBySize(bN,bO));};M.compareWith=function(bN,bO,bP){return N.compareWith(bN,bO,bP);};M.distinct=function(bN){return M.ofSeq(N.distinct(bN));};M.distinctBy=function(bN,bO){return M.ofSeq(N.distinctBy(bN,bO));};M.except=function(bN,bO){return M.ofSeq(N.except(bN,bO));};M.findBack=function(bN,bO){var bP;bP=M.tryFindBack(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.findIndexBack=function(bN,bO){var bP;bP=M.tryFindIndexBack(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.head=function(bN){M.nonEmpty(bN);return bN[0];};M.last=function(bN){M.nonEmpty(bN);return bN[bN.length-1];};M.map3=function(bN,bO,bP,bQ){var bR,bS,bT;M.checkLength(bO,bP);M.checkLength(bO,bQ);bR=new a.Array(bQ.length);for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS]=bN(bO[bS],bP[bS],bQ[bS]);return bR;};M.pairwise=function(bN){return M.ofSeq(N.pairwise(bN));};M.replicate=function(bN,bO){return M.create(bN,bO);};M.indexed=function(bN){return M.mapi(function(bO,bP){return[bO,bP];},bN);};M.skip=function(bN,bO){return bN<0?N.nonNegative():bN>bO.length?N.insufficient():bO.slice(bN);};M.skipWhile=function(bN,bO){var bP,bQ;bQ=bO.length;bP=0;while(bP<bQ&&bN(bO[bP]))bP=bP+1;return bO.slice(bP);};M.tail=function(bN){return M.skip(1,bN);};M.take=function(bN,bO){return bN<0?N.nonNegative():bN>bO.length?N.insufficient():bO.slice(0,bN);};M.takeWhile=function(bN,bO){var bP,bQ;bQ=bO.length;bP=0;while(bP<bQ&&bN(bO[bP]))bP=bP+1;return bO.slice(0,bP);};M.exactlyOne=function(bN){return bN.length===1?bN[0]:B.FailWith("The input does not have precisely one element.");};M.tryExactlyOne=function(bN){return bN.length===1?{$:1,$0:bN[0]}:null;};M.unfold=function(bN,bO){return M.ofSeq(N.unfold(bN,bO));};M.windowed=function(bN,bO){return M.ofSeq(N.windowed(bN,bO));};M.splitAt=function(bN,bO){return[M.take(bN,bO),M.skip(bN,bO)];};M.nonEmpty=function(bN){if(bN.length===0)B.FailWith("The input array was empty.");};M.checkLength=function(bN,bO){if(bN.length!==bO.length)B.FailWith("The arrays have different lengths.");};P.init=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=M.zeroCreate2D(bN,bO);for(bR=0,bS=bN-1;bR<=bS;bR++){for(bT=0,bU=bO-1;bT<=bU;bT++)M.set2D(bQ,bR,bT,bP(bR,bT));}return bQ;};P.iter=function(bN,bO){var bP,bQ,bR,bS,bT,bU;bP=bO.length;bQ=bO.length?bO[0].length:0;for(bR=0,bS=bP-1;bR<=bS;bR++){for(bT=0,bU=bQ-1;bT<=bU;bT++)bN(M.get2D(bO,bR,bT));}};P.iteri=function(bN,bO){var bP,bQ,bR,bS,bT,bU;bP=bO.length;bQ=bO.length?bO[0].length:0;for(bR=0,bS=bP-1;bR<=bS;bR++){for(bT=0,bU=bQ-1;bT<=bU;bT++)bN(bR,bT,M.get2D(bO,bR,bT));}};P.map=function(bN,bO){return P.init(bO.length,bO.length?bO[0].length:0,function(bP,bQ){return bN(M.get2D(bO,bP,bQ));});};P.mapi=function(bN,bO){return P.init(bO.length,bO.length?bO[0].length:0,function(bP,bQ){return bN(bP,bQ,M.get2D(bO,bP,bQ));});};P.copy=function(bN){return P.init(bN.length,bN.length?bN[0].length:0,function(bO,bP){return M.get2D(bN,bO,bP);});};Q=b.CancellationTokenSource=bG.Class({CancelAfter:function(bN){var bO,bP;bO=this;!this.c?(bP=this.pending,bP==null?void 0:a.clearTimeout(bP.$0),this.pending={$:1,$0:a.setTimeout(function(){bO.Cancel$1();},bN)}):void 0;},Cancel:function(bN){if(!bN)this.Cancel$1();else if(!this.c){this.c=true;M.iter(function(bO){bO();},this.r);}},Cancel$1:function(){var bN;if(!this.c){this.c=true;bN=M.choose(function(bO){try{bO();return null;}catch(bP){return{$:1,$0:bP};}},this.r);if(M.length(bN)>0)throw new _8.New$3(bN);else void 0;}}},j,Q);Q.CreateLinkedTokenSource=function(bN,bO){return Q.CreateLinkedTokenSource$1([bN,bO]);};Q.CreateLinkedTokenSource$1=function(bN){var bO;bO=new Q.New();M.iter(function(bP){function bQ(bR){return bO.Cancel$1();}E.Register(bP,function(){bQ();});},bN);return bO;};Q.New=bG.Ctor(function(){j.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},Q);R.IsWhiteSpace=function(bN){return bN.match(new a.RegExp("\\s"))!==null;};R.Parse=function(bN){return bN.length===1?bN:B.FailWith("String must be exactly one character long.");};R.IsUpper=function(bN){return bN>="A"&&bN<="Z";};R.IsLower=function(bN){return bN>="a"&&bN<="z";};R.IsLetterOrDigit=function(bN){return R.IsLetter(bN)||R.IsDigit(bN);};R.IsLetter=function(bN){return bN>="A"&&bN<="Z"||bN>="a"&&bN<="z";};R.IsDigit=function(bN){return bN>="0"&&bN<="9";};R.IsControl=function(bN){return bN>="\u0000"&&bN<="\u001f"||bN>="\u0080"&&bN<="\u009f";};R.GetNumericValue=function(bN){return bN>="0"&&bN<="9"?bN.charCodeAt()-"0".charCodeAt():-1;};S.observer=function(bN){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bN};};T.LongTime=function(bN){return(new bK(bN)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};T.ShortTime=function(bN){return(new bK(bN)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};T.LongDate=function(bN){return(new bK(bN)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};T.Parse=function(bN){var bO;bO=T.TryParse(bN);return bO!=null&&bO.$==1?bO.$0:B.FailWith("Failed to parse date string.");};T.TryParse=function(bN){var bO;bO=bK.parse(bN);return a.isNaN(bO)?null:{$:1,$0:bO};};T.AddMonths=function(bN,bO){var bP;bP=new bK(bN);return(new bK(bP.getFullYear(),bP.getMonth()+bO,bP.getDate(),bP.getHours(),bP.getMinutes(),bP.getSeconds(),bP.getMilliseconds())).getTime();};T.AddYears=function(bN,bO){var bP;bP=new bK(bN);return(new bK(bP.getFullYear()+bO,bP.getMonth(),bP.getDate(),bP.getHours(),bP.getMinutes(),bP.getSeconds(),bP.getMilliseconds())).getTime();};T.TimePortion=function(bN){var bO;bO=new bK(bN);return(((24*0+bO.getHours())*60+bO.getMinutes())*60+bO.getSeconds())*1000+bO.getMilliseconds();};T.DatePortion=function(bN){var bO;bO=new bK(bN);return(new bK(bO.getFullYear(),bO.getMonth(),bO.getDate())).getTime();};U.get_Now=function(){var bN;bN=new bK();return{d:bN.getTime(),o:-bN.getTimezoneOffset()};};U.get_DateTime=function(bN){return bN.d;};V.InvocationList=function(bN){return bN.$Invokes||[bN];};V.RemoveAll=function(bN,bO){var bP;bP=V.InvocationList(bN);M.length(V.InvocationList(bO))>1?B.FailWith("TODO: Remove multicast delegates"):void 0;return bG.CreateDelegate(M.filter(function(bQ){return!by.Equals(bQ,bO);},bP));};V.Remove=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV;bR=V.InvocationList(bN);if(M.length(V.InvocationList(bO))>1)B.FailWith("TODO: Remove multicast delegates");bS=[];bQ=false;for(bT=M.length(bR)-1,bU=0;bT>=bU;bT--){bV=M.get(bR,bT);!bQ&&bG.DelegateEqual(bV,bO)?bQ=true:bS.unshift(bV);}return bG.CreateDelegate(bS);};V.DelegateTarget=function(bN){var bO;return!bN?null:"$Target"in bN?bN.$Target:"$Invokes"in bN?(bO=bN.$Invokes,(M.get(bO,M.length(bO)-1))[1]):null;};W.getHashCode=function(bN,bO){return bN.CGetHashCode(bO);};W.equals=function(bN){return function(bO,bP){return bN.CEquals(bO,bP);};};W.alreadyAdded=function(){return B.FailWith("An item with the same key has already been added.");};W.notPresent=function(){return B.FailWith("The given key was not present in the dictionary.");};X=t.KeyCollection=bG.Class({GetEnumerator$1:function(){return J.Get(N.map(function(bN){return bN.K;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},j,X);X.New=bG.Ctor(function(bN){j.New.call(this);this.d=bN;},X);Y=t.ValueCollection=bG.Class({GetEnumerator$1:function(){return J.Get(N.map(function(bN){return bN.V;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},j,Y);Y.New=bG.Ctor(function(bN){j.New.call(this);this.d=bN;},Y);Z=t.Dictionary=bG.Class({remove:function(bN){var bO,bP,bQ,bR;bO=this;bP=this.hash(bN);bQ=this.data[bP];return bQ==null?false:(bR=M.filter(function(bS){return!bO.equals.apply(null,[(B.KeyValue(bS))[0],bN]);},bQ),M.length(bR)<bQ.length&&(this.count=this.count-1,this.data[bP]=bR,true));},add:function(bN,bO){var bP,bQ,bR;bP=this;bQ=this.hash(bN);bR=this.data[bQ];bR==null?(this.count=this.count+1,this.data[bQ]=new a.Array({K:bN,V:bO})):(M.exists(function(bS){return bP.equals.apply(null,[(B.KeyValue(bS))[0],bN]);},bR)?W.alreadyAdded():void 0,this.count=this.count+1,bR.push({K:bN,V:bO}));},set:function(bN,bO){var bP,bQ,bR,bS;bP=this;bQ=this.hash(bN);bR=this.data[bQ];bR==null?(this.count=this.count+1,this.data[bQ]=new a.Array({K:bN,V:bO})):(bS=M.tryFindIndex(function(bT){return bP.equals.apply(null,[(B.KeyValue(bT))[0],bN]);},bR),bS==null?(this.count=this.count+1,bR.push({K:bN,V:bO})):bR[bS.$0]={K:bN,V:bO});},get:function(bN){var bO,bP;bO=this;bP=this.data[this.hash(bN)];return bP==null?W.notPresent():M.pick(function(bQ){var bR;bR=B.KeyValue(bQ);return bO.equals.apply(null,[bR[0],bN])?{$:1,$0:bR[1]}:null;},bP);},get_Keys:function(){return new X.New(this);},get_Values:function(){return new Y.New(this);},TryGetValue:function(bN,bO){var bP,bQ,bR;bP=this;bQ=this.data[this.hash(bN)];return bQ==null?false:(bR=M.tryPick(function(bS){var bT;bT=B.KeyValue(bS);return bP.equals.apply(null,[bT[0],bN])?{$:1,$0:bT[1]}:null;},bQ),bR!=null&&bR.$==1&&(bO.set(bR.$0),true));},Remove:function(bN){return this.remove(bN);},GetEnumerator$1:function(){return J.Get0(this);},set_Item:function(bN,bO){this.set(bN,bO);},get_Item:function(bN){return this.get(bN);},ContainsKey:function(bN){var bO,bP;bO=this;bP=this.data[this.hash(bN)];return bP==null?false:M.exists(function(bQ){return bO.equals.apply(null,[(B.KeyValue(bQ))[0],bN]);},bP);},Clear:function(){this.data=[];this.count=0;},Add:function(bN,bO){this.add(bN,bO);},GetEnumerator:function(){return J.Get0(this);},GetEnumerator0:function(){return J.Get0(M.concat(d.GetFieldValues(this.data)));}},j,Z);Z.New=bG.Ctor(function(bN,bO){Z.New$6.call(this,bN,W.equals(bO),function(bP){return W.getHashCode(bO,bP);});},Z);Z.New$1=bG.Ctor(function(bN){Z.New$6.call(this,bN,by.Equals,by.Hash);},Z);Z.New$2=bG.Ctor(function(bN,bO){Z.New$3.call(this,bO);},Z);Z.New$3=bG.Ctor(function(bN){Z.New$6.call(this,[],W.equals(bN),function(bO){return W.getHashCode(bN,bO);});},Z);Z.New$4=bG.Ctor(function(bN){Z.New$5.call(this);},Z);Z.New$5=bG.Ctor(function(){Z.New$6.call(this,[],by.Equals,by.Hash);},Z);Z.New$6=bG.Ctor(function(bN,bO,bP){var bQ,bR;j.New.call(this);this.equals=bO;this.hash=bP;this.count=0;this.data=[];bQ=J.Get(bN);try{while(bQ.MoveNext()){bR=bQ.Current();this.set(bR.K,bR.V);}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},Z);_0.withInner=function(bN,bO){var bP;bP=new e(bN);bP.inner=bO;return bP;};_1=b.MatchFailureException=bG.Class({},e,_1);_1.New=bG.Ctor(function(bN,bO,bP){this.message=bN+" at "+bJ(bO)+":"+bJ(bP);a.Object.setPrototypeOf(this,_1.prototype);},_1);_2=b.IndexOutOfRangeException=bG.Class({},e,_2);_2.New=bG.Ctor(function(){_2.New$1.call(this,"Index was outside the bounds of the array.");},_2);_2.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,_2.prototype);},_2);_3=b.OperationCanceledException=bG.Class({},e,_3);_3.New=bG.Ctor(function(bN){_3.New$1.call(this,"The operation was canceled.",null,bN);},_3);_3.New$1=bG.Ctor(function(bN,bO,bP){this.message=bN;this.inner=bO;a.Object.setPrototypeOf(this,_3.prototype);this.ct=bP;},_3);_4=b.ArgumentException=bG.Class({},e,_4);_4.New=bG.Ctor(function(bN,bO){_4.New$2.call(this,bO+"\nParameter name: "+bN);},_4);_4.New$1=bG.Ctor(function(){_4.New$2.call(this,"Value does not fall within the expected range.");},_4);_4.New$2=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,_4.prototype);},_4);_5=b.ArgumentOutOfRangeException=bG.Class({},e,_5);_5.New=bG.Ctor(function(bN,bO){this.message=bO+"\nParameter name: "+bN;a.Object.setPrototypeOf(this,_5.prototype);},_5);_5.New$1=bG.Ctor(function(bN){_5.New.call(this,bN,"Specified argument was out of the range of valid values.");},_5);_5.New$2=bG.Ctor(function(){this.message="Specified argument was out of the range of valid values.";a.Object.setPrototypeOf(this,_5.prototype);},_5);_6=b.ArgumentNullException=bG.Class({},e,_6);_6.New=bG.Ctor(function(bN,bO){this.message=bO+"\nParameter name: "+bN;a.Object.setPrototypeOf(this,_6.prototype);},_6);_6.New$1=bG.Ctor(function(bN){_6.New.call(this,bN,"Value cannot be null.");},_6);_6.New$2=bG.Ctor(function(){this.message="Value cannot be null.";a.Object.setPrototypeOf(this,_6.prototype);},_6);_7=b.InvalidOperationException=bG.Class({},e,_7);_7.New=bG.Ctor(function(bN){_7.New$2.call(this,bN,null);},_7);_7.New$1=bG.Ctor(function(){_7.New.call(this,"Operation is not valid due to the current state of the object.");},_7);_7.New$2=bG.Ctor(function(bN,bO){this.message=bN;this.inner=bO;a.Object.setPrototypeOf(this,_7.prototype);},_7);_8=b.AggregateException=bG.Class({},e,_8);_8.New=bG.Ctor(function(bN,bO){_8.New$4.call(this,bN,[bO]);},_8);_8.New$1=bG.Ctor(function(bN,bO){_8.New$4.call(this,bN,M.ofSeq(bO));},_8);_8.New$2=bG.Ctor(function(bN){_8.New$4.call(this,"One or more errors occurred.",M.ofSeq(bN));},_8);_8.New$3=bG.Ctor(function(bN){_8.New$4.call(this,"One or more errors occurred.",bN);},_8);_8.New$4=bG.Ctor(function(bN,bO){this.message=bN;a.Object.setPrototypeOf(this,_8.prototype);this.innerExceptions=bO;},_8);_9=b.TimeoutException=bG.Class({},e,_9);_9.New=bG.Ctor(function(){_9.New$1.call(this,"The operation has timed out.");},_9);_9.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,_9.prototype);},_9);_=b.FormatException=bG.Class({},e,_);_.New=bG.Ctor(function(){_.New$1.call(this,"One of the identified items was in an invalid format.");},_);_.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,_.prototype);},_);$=b.OverflowException=bG.Class({},e,$);$.New=bG.Ctor(function(){$.New$1.call(this,"Arithmetic operation resulted in an overflow.");},$);$.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,$.prototype);},$);ba=b.TaskCanceledException=bG.Class({},e,ba);ba.New=bG.Ctor(function(){ba.New$1.call(this,"A task was canceled.");},ba);ba.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,ba.prototype);},ba);bb=b.KeyNotFoundException=bG.Class({},e,bb);bb.New=bG.Ctor(function(){bb.New$1.call(this,"The given key was not present in the dictionary.");},bb);bb.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,bb.prototype);},bb);M.create2D=function(bN){var bO;bO=M.ofSeq(N.map(M.ofSeq,bN));bO.dims=2;return bO;};bd.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bN){var bO,bP;bO=bM.random()*16|0;bP=bN=="x"?bO:bO&3|8;return bP.toString(16);});};bd.TryParseExact=function(bN,bO,bP){try{bP.set(bd.ParseExact(bN,bO));return true;}catch(bQ){return false;}};bd.TryParse=function(bN,bO){try{bO.set(bd.Parse(bN));return true;}catch(bP){return false;}};bd.ParseExact=function(bN,bO){var bP,bQ,bR,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;function bS(b3){var b4,b5,b6,b7;for(b4=0,b5=35;b4<=b5;b4++){b4===8||(b4===13||(b4===18||b4===23))?b3[b4]!=="-"?bd.ShapeError():void 0:(b7=b3[b4],!("0"<=b7&&b7<="9"||"a"<=b7&&b7<="f")?bd.ShapeError():void 0);}return b3;}bT=bO.toUpperCase();if(bT==="N"){bU=bu.Trim(bN).toLowerCase();if(bU.length!==32)bd.ShapeError();for(bV=0,bW=31;bV<=bW;bV++){bX=bU[bV];!("0"<=bX&&bX<="9"||"a"<=bX&&bX<="f")?bd.ShapeError():void 0;}return bu.Substring(bU,0,8)+"-"+bu.Substring(bU,8,4)+"-"+bu.Substring(bU,12,4)+"-"+bu.Substring(bU,16,4)+"-"+bU.substring(20);}else if(bT==="D"){bP=bu.Trim(bN).toLowerCase();bP.length!==36?bd.ShapeError():void 0;return bS(bP);}else if(bT==="B"){bQ=bu.Trim(bN).toLowerCase();bQ.length!==38||bQ[0]!=="{"||bQ[17]!=="}"?bd.ShapeError():void 0;return bS(bu.Substring(bQ,1,36));}else if(bT==="P"){bR=bu.Trim(bN).toLowerCase();bR.length!==38||bR[0]!=="("||bR[17]!==")"?bd.ShapeError():void 0;return bS(bu.Substring(bR,1,36));}else if(bT==="X"){bY=bu.Trim(bN).toLowerCase();if(bY.length!==68)bd.ShapeError();for(bZ=0,b0=67;bZ<=b0;bZ++){switch(bZ){case 26:case 0:if(bY[bZ]!=="{")bd.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bY[bZ]!=="0")bd.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bY[bZ]!=="x")bd.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bY[bZ]!==",")bd.ShapeError();break;case 67:case 66:if(bY[bZ]!=="{")bd.ShapeError();break;default:b2=bY[bZ];!("0"<=b2&&b2<="9"||"a"<=b2&&b2<="f")?bd.ShapeError():void 0;break;}}return bu.Substring(bY,3,8)+"-"+bu.Substring(bY,14,4)+"-"+bu.Substring(bY,21,4)+"-"+bu.Substring(bY,29,2)+bu.Substring(bY,34,2)+"-"+bu.Substring(bY,39,2)+bu.Substring(bY,44,2)+bu.Substring(bY,49,2)+bu.Substring(bY,54,2)+bu.Substring(bY,59,2)+bu.Substring(bY,64,2);}else return bd.FormatError();};bd.Parse=function(bN){var bO,bP,bQ;try{return bd.ParseExact(bN,"D");}catch(bR){try{bO=bd.ParseExact(bN,"B");}catch(bS){try{bP=bd.ParseExact(bN,"P");}catch(bT){try{bQ=bd.ParseExact(bN,"N");}catch(bU){bQ=bd.ParseExact(bN,"X");}bP=bQ;}bO=bP;}return bO;}};bd.ToString=function(bN,bO){var bP;bP=bO.toUpperCase();return bP==="N"?bu.Replace(bN,"-",""):bP==="D"?bN:bP==="B"?"{"+bN+"}":bP==="P"?"("+bN+")":bP==="X"?"{0x"+bu.Substring(bN,0,8)+",0x"+bu.Substring(bN,9,4)+",0x"+bu.Substring(bN,14,4)+",{0x"+bu.Substring(bN,19,2)+",0x"+bu.Substring(bN,21,2)+",0x"+bu.Substring(bN,24,2)+",0x"+bu.Substring(bN,26,2)+",0x"+bu.Substring(bN,28,2)+",0x"+bu.Substring(bN,30,2)+",0x"+bu.Substring(bN,32,2)+",0x"+bu.Substring(bN,34,2)+"}}":bd.FormatError();};bd.ParseError=function(){throw new _.New$1("Unrecognized Guid format.");};bd.ShapeError=function(){throw new _.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bd.HexaError=function(){throw new _.New$1("Hexadecimal Guid printing not implemented by WebSharper.");};bd.FormatError=function(){throw new _.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};be.concat=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push.apply(bO,bN[bQ]);return bO;};bf=t.HashSet=bG.Class({add:function(bN){var bO,bP;bO=this.hash(bN);bP=this.data[bO];return bP==null?(this.data[bO]=[bN],this.count=this.count+1,true):this.arrContains(bN,bP)?false:(bP.push(bN),this.count=this.count+1,true);},arrRemove:function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=bO.length;while(bP&&bQ<bS)if(this.equals.apply(null,[bO[bQ],bN])){bO.splice.apply(bO,[bQ,1]);bP=false;}else bQ=bQ+1;return!bP;},arrContains:function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=bO.length;while(bP&&bQ<bS)if(this.equals.apply(null,[bO[bQ],bN]))bP=false;else bQ=bQ+1;return!bP;},UnionWith:function(bN){var bO;bO=J.Get(bN);try{while(bO.MoveNext())this.Add(bO.Current());}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},SymmetricExceptWith:function(bN){var bO,bP;bO=J.Get(bN);try{while(bO.MoveNext()){bP=bO.Current();this.Contains(bP)?this.Remove(bP):this.Add(bP);}}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},SetEquals:function(bN){var bO;bO=new bf.New$4(bN,this.equals,this.hash);return this.get_Count()===bO.get_Count()&&this.IsSupersetOf(bO);},RemoveWhere:function(bN){var bO,bP,bQ,bR,bS;bP=be.concat(this.data);bO=0;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=bP[bQ];bN(bS)?this.Remove(bS)?bO=bO+1:void 0:void 0;}return bO;},Remove:function(bN){var bO;bO=this.data[this.hash(bN)];return bO==null?false:this.arrRemove(bN,bO)&&(this.count=this.count-1,true);},Overlaps:function(bN){var bO;bO=this;return N.exists(function(bP){return bO.Contains(bP);},bN);},IsSupersetOf:function(bN){var bO;bO=this;return N.forall(function(bP){return bO.Contains(bP);},bN);},IsSubsetOf:function(bN){var bO;bO=new bf.New$4(bN,this.equals,this.hash);return M.forall(function(bP){return bO.Contains(bP);},be.concat(this.data));},IsProperSupersetOf:function(bN){var bO;bO=M.ofSeq(bN);return this.count>M.length(bO)&&this.IsSupersetOf(bO);},IsProperSubsetOf:function(bN){var bO;bO=M.ofSeq(bN);return this.count<M.length(bO)&&this.IsSubsetOf(bO);},IntersectWith:function(bN){var bO,bP,bQ,bR,bS;bO=new bf.New$4(bN,this.equals,this.hash);bP=be.concat(this.data);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=bP[bQ];!bO.Contains(bS)?this.Remove(bS):void 0;}},ExceptWith:function(bN){var bO;bO=J.Get(bN);try{while(bO.MoveNext())this.Remove(bO.Current());}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bN){var bO,bP,bQ,bR;bO=0;bP=be.concat(this.data);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)M.set(bN,bQ,bP[bQ]);},Contains:function(bN){var bO;bO=this.data[this.hash(bN)];return bO==null?false:this.arrContains(bN,bO);},Clear:function(){this.data=[];this.count=0;},Add:function(bN){return this.add(bN);},GetEnumerator:function(){return J.Get(be.concat(this.data));},GetEnumerator0:function(){return J.Get(be.concat(this.data));}},j,bf);bf.New=bG.Ctor(function(bN,bO){bf.New$4.call(this,bN,W.equals(bO),function(bP){return W.getHashCode(bO,bP);});},bf);bf.New$1=bG.Ctor(function(bN){bf.New$4.call(this,[],W.equals(bN),function(bO){return W.getHashCode(bN,bO);});},bf);bf.New$2=bG.Ctor(function(bN){bf.New$4.call(this,bN,by.Equals,by.Hash);},bf);bf.New$3=bG.Ctor(function(){bf.New$4.call(this,[],by.Equals,by.Hash);},bf);bf.New$4=bG.Ctor(function(bN,bO,bP){var bQ;j.New.call(this);this.equals=bO;this.hash=bP;this.data=[];this.count=0;bQ=J.Get(bN);try{while(bQ.MoveNext())this.add(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},bf);bh=bg.DictionaryEntry=bG.Class({set_Value:function(bN){this.innerValue=bN;},Value:function(){return this.innerValue;},set_Key:function(bN){this.innerKey=bN;},Key:function(){return this.innerKey;}},j,bh);bh.New=bG.Ctor(function(bN,bO){j.New.call(this);this.innerKey=bN;this.innerValue=bO;},bh);bj.New=function(bN,bO,bP){return{c:bN,v:bO,f:bP};};bk.Force=function(bN){return bN.f();};bk.CreateFromValue=function(bN){return bj.New(true,bN,bk.cachedLazy);};bk.Create=function(bN){return bj.New(false,bN,bk.forceLazy);};bk.forceLazy=function(){var bN;bN=this.v();this.c=true;this.v=bN;this.f=bk.cachedLazy;return bN;};bk.cachedLazy=function(){return this.v;};bl=O.T=bG.Class({GetSlice:function(bN,bO){var bP;return bN!=null&&bN.$==1?bO!=null&&bO.$==1?(bP=bN.$0,O.ofSeq(N.take(bO.$0-bP+1,O.skip(bP,this)))):O.skip(bN.$0,this):bO!=null&&bO.$==1?O.ofSeq(N.take(bO.$0+1,this)):this;},get_Item:function(bN){return N.nth(bN,this);},get_Length:function(){return O.length(this);},GetEnumerator:function(){return new K.New(this,null,function(bN){var bO;bO=bN.s;return bO.$==0?false:(bN.c=bO.$0,bN.s=bO.$1,true);},void 0);},GetEnumerator0:function(){return J.Get(this);}},null,bl);bl.Empty=new bl({$:0});O.allPairs=function(bN,bO){return O.ofArray(M.allPairs(M.ofList(bN),M.ofList(bO)));};O.append=function(bN,bO){var bP,bQ,bR,bS,bT;if(bN.$==0)return bO;else if(bO.$==0)return bN;else{bS=new bl({$:1});bP=bS;bQ=bN;bR=true;while(bR){bP.$0=bQ.$0;bQ=bQ.$1;bQ.$==0?bR=false:bP=(bT=new bl({$:1}),bP.$1=bT,bT);}bP.$1=bO;return bS;}};O.choose=function(bN,bO){return O.ofSeq(N.choose(bN,bO));};O.collect=function(bN,bO){return O.ofSeq(N.collect(bN,bO));};O.concat=function(bN){return O.ofSeq(N.concat(bN));};O.exists=function(bN,bO){var bP,bQ;bP=false;bQ=bO;while(!bP&&bQ.$==1){bP=bN(bQ.$0);bQ=bQ.$1;}return bP;};O.exists2=function(bN,bO,bP){var bQ,bR,bS;bQ=false;bR=bO;bS=bP;while(!bQ&&bR.$==1&&bS.$==1){bQ=bN(bR.$0,bS.$0);bR=bR.$1;bS=bS.$1;}!bQ&&(bR.$==1||bS.$==1)?O.badLengths():void 0;return bQ;};O.filter=function(bN,bO){return O.ofSeq(N.filter(bN,bO));};O.fold2=function(bN,bO,bP,bQ){return M.fold2(bN,bO,M.ofList(bP),M.ofList(bQ));};O.foldBack=function(bN,bO,bP){return M.foldBack(bN,M.ofList(bO),bP);};O.foldBack2=function(bN,bO,bP,bQ){return M.foldBack2(bN,M.ofList(bO),M.ofList(bP),bQ);};O.forAll=function(bN,bO){var bP,bQ;bP=true;bQ=bO;while(bP&&bQ.$==1){bP=bN(bQ.$0);bQ=bQ.$1;}return bP;};O.forall2=function(bN,bO,bP){var bQ,bR,bS;bQ=true;bR=bO;bS=bP;while(bQ&&bR.$==1&&bS.$==1){bQ=bN(bR.$0,bS.$0);bR=bR.$1;bS=bS.$1;}bQ&&(bR.$==1||bS.$==1)?O.badLengths():void 0;return bQ;};O.head=function(bN){return bN.$==1?bN.$0:O.listEmpty();};O.init=function(bN,bO){return O.ofArray(M.init(bN,bO));};O.iter=function(bN,bO){var bP;bP=bO;while(bP.$==1){bN(O.head(bP));bP=O.tail(bP);}};O.iter2=function(bN,bO,bP){var bQ,bR;bQ=bO;bR=bP;while(bQ.$==1){bR.$==0?O.badLengths():void 0;bN(O.head(bQ),O.head(bR));bQ=O.tail(bQ);bR=O.tail(bR);}bR.$==1?O.badLengths():void 0;};O.iteri=function(bN,bO){var bP,bQ;bP=bO;bQ=0;while(bP.$==1){bN(bQ,O.head(bP));bP=O.tail(bP);bQ=bQ+1;}};O.iteri2=function(bN,bO,bP){var bQ,bR,bS;bQ=bO;bR=bP;bS=0;while(bQ.$==1){bR.$==0?O.badLengths():void 0;bN(bS,O.head(bQ),O.head(bR));bQ=O.tail(bQ);bR=O.tail(bR);bS=bS+1;}bR.$==1?O.badLengths():void 0;};O.length=function(bN){var bO,bP;bO=bN;bP=0;while(bO.$==1){bO=O.tail(bO);bP=bP+1;}return bP;};O.map=function(bN,bO){var bP,bQ,bR,bS,bT;if(bO.$==0)return bO;else{bS=new bl({$:1});bP=bS;bQ=bO;bR=true;while(bR){bP.$0=bN(bQ.$0);bQ=bQ.$1;bQ.$==0?bR=false:bP=(bT=new bl({$:1}),bP.$1=bT,bT);}bP.$1=bl.Empty;return bS;}};O.map2=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV;bQ=bO.$==1&&bP.$==1;if(!bQ)return bO.$==1||bP.$==1?O.badLengths():bO;else{bU=new bl({$:1});bR=bU;bS=bO;bT=bP;while(bQ){bR.$0=bN(bS.$0,bT.$0);bS=bS.$1;bT=bT.$1;bS.$==1&&bT.$==1?bR=(bV=new bl({$:1}),bR.$1=bV,bV):bQ=false;}if(bS.$==1||bT.$==1)O.badLengths();bR.$1=bl.Empty;return bU;}};O.map3=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW,bX;bR=bO.$==1&&bP.$==1&&bQ.$==1;if(!bR)return bO.$==1||bP.$==1||bQ.$==1?O.badLengths():bO;else{bW=new bl({$:1});bS=bW;bT=bO;bU=bP;bV=bQ;while(bR){bS.$0=bN(bT.$0,bU.$0,bV.$0);bT=bT.$1;bU=bU.$1;bV=bV.$1;bT.$==1&&bU.$==1&&bV.$==1?bS=(bX=new bl({$:1}),bS.$1=bX,bX):bR=false;}if(bT.$==1||bU.$==1||bV.$==1)O.badLengths();bS.$1=bl.Empty;return bW;}};O.mapi=function(bN,bO){var bP,bQ,bR,bS,bT,bU;if(bO.$==0)return bO;else{bT=new bl({$:1});bP=bT;bQ=bO;bR=0;bS=true;while(bS){bP.$0=bN(bR,bQ.$0);bQ=bQ.$1;bQ.$==0?bS=false:(bP=(bU=new bl({$:1}),bP.$1=bU,bU),bR=bR+1);}bP.$1=bl.Empty;return bT;}};O.mapi2=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV,bW;bQ=bO.$==1&&bP.$==1;if(!bQ)return bO.$==1||bP.$==1?O.badLengths():bO;else{bV=new bl({$:1});bR=bV;bS=bO;bT=bP;bU=0;while(bQ){bR.$0=bN(bU,bS.$0,bT.$0);bS=bS.$1;bT=bT.$1;bS.$==1&&bT.$==1?(bR=(bW=new bl({$:1}),bR.$1=bW,bW),bU=bU+1):bQ=false;}if(bS.$==1||bT.$==1)O.badLengths();bR.$1=bl.Empty;return bV;}};O.max=function(bN){var bO,bP,bQ;O.nonEmpty(bN);bO=bN.$0;bP=bN.$1;while(bP.$==1){bQ=bP.$0;by.Compare(bQ,bO)===1?bO=bQ:void 0;bP=bP.$1;}return bO;};O.maxBy=function(bN,bO){var bP,bQ,bR,bS,bT;O.nonEmpty(bO);bP=bO.$0;bQ=bN(bP);bR=bO.$1;while(bR.$==1){bS=bR.$0;bT=bN(bS);by.Compare(bT,bQ)===1?(bP=bS,bQ=bT):void 0;bR=bR.$1;}return bP;};O.min=function(bN){var bO,bP,bQ;O.nonEmpty(bN);bO=bN.$0;bP=bN.$1;while(bP.$==1){bQ=bP.$0;by.Compare(bQ,bO)===-1?bO=bQ:void 0;bP=bP.$1;}return bO;};O.minBy=function(bN,bO){var bP,bQ,bR,bS,bT;O.nonEmpty(bO);bP=bO.$0;bQ=bN(bP);bR=bO.$1;while(bR.$==1){bS=bR.$0;bT=bN(bS);by.Compare(bT,bQ)===-1?(bP=bS,bQ=bT):void 0;bR=bR.$1;}return bP;};O.ofArray=function(bN){var bO,bP,bQ;bO=bl.Empty;for(bP=M.length(bN)-1,bQ=0;bP>=bQ;bP--)bO=new bl({$:1,$0:M.get(bN,bP),$1:bO});return bO;};O.ofSeq=function(bN){var bO,bP,bQ,bR,bS,bT;if(bN instanceof bl)return bN;else if(bN instanceof a.Array)return O.ofArray(bN);else{bO=J.Get(bN);try{bQ=bO.MoveNext();if(!bQ)bP=bl.Empty;else{bS=new bl({$:1});bR=bS;while(bQ){bR.$0=bO.Current();bO.MoveNext()?bR=(bT=new bl({$:1}),bR.$1=bT,bT):bQ=false;}bR.$1=bl.Empty;bP=bS;}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}}};O.partition=function(bN,bO){var bP;bP=M.partition(bN,M.ofList(bO));return[O.ofArray(bP[0]),O.ofArray(bP[1])];};O.permute=function(bN,bO){return O.ofArray(M.permute(bN,M.ofList(bO)));};O.reduce=function(bN,bO){var bP,bQ;O.nonEmpty(bO);bP=bO.$0;bQ=bO.$1;while(bQ.$==1){bP=bN(bP,bQ.$0);bQ=bQ.$1;}return bP;};O.reduceBack=function(bN,bO){return M.reduceBack(bN,M.ofList(bO));};O.replicate=function(bN,bO){return O.ofArray(M.create(bN,bO));};O.rev=function(bN){var bO,bP;bO=bl.Empty;bP=bN;while(bP.$==1){bO=new bl({$:1,$0:bP.$0,$1:bO});bP=bP.$1;}return bO;};O.scan=function(bN,bO,bP){return O.ofSeq(N.scan(bN,bO,bP));};O.scanBack=function(bN,bO,bP){return O.ofArray(M.scanBack(bN,M.ofList(bO),bP));};O.sort=function(bN){var bO;bO=M.ofList(bN);M.sortInPlace(bO);return O.ofArray(bO);};O.sortBy=function(bN,bO){var bP;bP=M.ofList(bO);M.sortInPlaceBy(bN,bP);return O.ofArray(bP);};O.sortByDescending=function(bN,bO){var bP;bP=M.ofList(bO);M.sortInPlaceByDescending(bN,bP);return O.ofArray(bP);};O.sortDescending=function(bN){var bO;bO=M.ofList(bN);M.sortInPlaceByDescending(a.id,bO);return O.ofArray(bO);};O.sortWith=function(bN,bO){var bP;bP=M.ofList(bO);M.sortInPlaceWith(bN,bP);return O.ofArray(bP);};O.tail=function(bN){return bN.$==1?bN.$1:O.listEmpty();};O.transpose=function(bN){return O.ofSeq(N.map(O.ofArray,M.transposeArray(M.ofSeq(N.map(M.ofList,bN)))));};O.unzip=function(bN){var bO,bP,bQ,bR;bO=[];bP=[];bQ=J.Get(bN);try{while(bQ.MoveNext()){bR=bQ.Current();bO.push(bR[0]);bP.push(bR[1]);}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return[O.ofArray(bO.slice(0)),O.ofArray(bP.slice(0))];};O.unzip3=function(bN){var bO,bP,bQ,bR,bS;bO=[];bP=[];bQ=[];bR=J.Get(bN);try{while(bR.MoveNext()){bS=bR.Current();bO.push(bS[0]);bP.push(bS[1]);bQ.push(bS[2]);}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return[O.ofArray(bO.slice(0)),O.ofArray(bP.slice(0)),O.ofArray(bQ.slice(0))];};O.zip=function(bN,bO){return O.map2(function(bP,bQ){return[bP,bQ];},bN,bO);};O.zip3=function(bN,bO,bP){return O.map3(function(bQ,bR,bS){return[bQ,bR,bS];},bN,bO,bP);};O.chunkBySize=function(bN,bO){return O.map(O.ofArray,O.ofSeq(N.chunkBySize(bN,bO)));};O.compareWith=function(bN,bO,bP){return N.compareWith(bN,bO,bP);};O.countBy=function(bN,bO){return O.ofArray(M.countBy(bN,M.ofList(bO)));};O.distinct=function(bN){return O.ofSeq(N.distinct(bN));};O.distinctBy=function(bN,bO){return O.ofSeq(N.distinctBy(bN,bO));};O.splitInto=function(bN,bO){return O.map(O.ofArray,O.ofArray(M.splitInto(bN,M.ofList(bO))));};O.except=function(bN,bO){return O.ofSeq(N.except(bN,bO));};O.tryFindBack=function(bN,bO){return M.tryFindBack(bN,M.ofList(bO));};O.findBack=function(bN,bO){var bP;bP=O.tryFindBack(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};O.findIndexBack=function(bN,bO){var bP;bP=M.tryFindIndexBack(bN,M.ofList(bO));return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};O.groupBy=function(bN,bO){var bP;function bQ(bR,bS){return[bR,O.ofArray(bS)];}bP=M.groupBy(bN,M.ofList(bO));M.mapInPlace(function(bR){return bQ(bR[0],bR[1]);},bP);return O.ofArray(bP);};O.last=function(bN){var bO,bP;O.nonEmpty(bN);bO=bN;bP=bO.$1;while(bP.$==1){bO=bP;bP=bO.$1;}return bO.$0;};O.contains=function(bN,bO){var bP,bQ;bP=false;bQ=bO;while(!bP&&bQ.$==1){bP=by.Equals(bN,bQ.$0);bQ=bQ.$1;}return bP;};O.mapFold=function(bN,bO,bP){var bQ;bQ=M.mapFold(bN,bO,M.ofList(bP));return[O.ofArray(bQ[0]),bQ[1]];};O.mapFoldBack=function(bN,bO,bP){var bQ;bQ=M.mapFoldBack(bN,M.ofList(bO),bP);return[O.ofArray(bQ[0]),bQ[1]];};O.pairwise=function(bN){return O.ofSeq(N.pairwise(bN));};O.indexed=function(bN){return O.mapi(function(bO,bP){return[bO,bP];},bN);};O.tryHead=function(bN){return bN.$==0?null:{$:1,$0:bN.$0};};O.exactlyOne=function(bN){var bO;return bN.$==1&&(bN.$1.$==0&&(bO=bN.$0,true))?bO:B.FailWith("The input does not have precisely one element.");};O.tryExactlyOne=function(bN){var bO;return bN.$==1&&(bN.$1.$==0&&(bO=bN.$0,true))?{$:1,$0:bO}:null;};O.unfold=function(bN,bO){return O.ofSeq(N.unfold(bN,bO));};O.windowed=function(bN,bO){return O.ofSeq(N.map(O.ofArray,N.windowed(bN,bO)));};O.splitAt=function(bN,bO){return[O.ofSeq(N.take(bN,bO)),O.skip(bN,bO)];};O.nonEmpty=function(bN){if(bN.$==0)O.listEmpty();};O.listEmpty=function(){return B.FailWith("The input list was empty.");};O.badLengths=function(){return B.FailWith("The lists have different lengths.");};C.getOrValue=function(bN,bO){return bN===null?bO:bN;};C.get=function(bN){return bN===null?B.FailWith("Nullable object must have a value."):bN;};B.range=function(bN,bO){var bP;bP=1+bO-bN;return bP<=0?[]:N.init(bP,function(bQ){return bQ+bN;});};B.step=function(bN,bO,bP){var bQ;bQ=B.Sign(bO);return N.takeWhile(function(bR){return bQ*(bP-bR)>=0;},N.initInfinite(function(bR){return bN+bR*bO;}));};B.KeyValue=function(bN){return[bN.K,bN.V];};B.Truncate=function(bN){return bN<0?bM.ceil(bN):bM.floor(bN);};B.Sign=function(bN){return bN===0?0:bN<0?-1:1;};B.Pown=function(bN,bO){function bP(bQ){var bR;return bQ===1?bN:bQ%2===0?(bR=bP(bQ/2>>0),bR*bR):bN*bP(bQ-1);}return bP(bO);};B.toInt=function(bN){var bO;bO=B.toUInt(bN);return bO>=2147483648?bO-4294967296:bO;};B.toUInt=function(bN){return(bN<0?bM.ceil(bN):bM.floor(bN))>>>0;};B.InvalidArg=function(bN,bO){throw new _4.New(bN,bO);};B.InvalidOp=function(bN){throw new _7.New(bN);};B.FailWith=function(bN){throw new e(bN);};bm.string=function(bN,bO,bP){return bO==null?bP!=null&&bP.$==1?bN.slice(0,bP.$0+1):"":bP==null?bN.slice(bO.$0):bN.slice(bO.$0,bP.$0+1);};bm.array=function(bN,bO,bP){return bO==null?bP!=null&&bP.$==1?bN.slice(0,bP.$0+1):[]:bP==null?bN.slice(bO.$0):bN.slice(bO.$0,bP.$0+1);};bm.setArray=function(bN,bO,bP,bQ){var bR;bR=bO!=null&&bO.$==1?bO.$0:0;M.setSub(bN,bR,(bP!=null&&bP.$==1?bP.$0:bN.length-1)-bR+1,bQ);};bm.array2D=function(bN,bO,bP,bQ,bR){var bS,bT;bS=bO!=null&&bO.$==1?bO.$0:0;bT=bQ!=null&&bQ.$==1?bQ.$0:0;return M.sub2D(bN,bS,bT,(bP!=null&&bP.$==1?bP.$0:bN.length-1)-bS+1,(bR!=null&&bR.$==1?bR.$0:(bN.length?bN[0].length:0)-1)-bT+1);};bm.array2Dfix1=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW;bR=bP!=null&&bP.$==1?bP.$0:0;bS=bQ!=null&&bQ.$==1?bQ.$0:(bN.length?bN[0].length:0)-1;bT=bS-bR+1;bU=new a.Array(bT);for(bV=0,bW=bT-1;bV<=bW;bV++)M.set(bU,bV,M.get2D(bN,bO,bR+bV));return bU;};bm.array2Dfix2=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW;bR=bO!=null&&bO.$==1?bO.$0:0;bS=bP!=null&&bP.$==1?bP.$0:bN.length-1;bT=bS-bR+1;bU=new a.Array(bT);for(bV=0,bW=bT-1;bV<=bW;bV++)M.set(bU,bV,M.get2D(bN,bR+bV,bQ));return bU;};bm.setArray2Dfix1=function(bN,bO,bP,bQ,bR){var bS,bT,bU,bV;bS=bP!=null&&bP.$==1?bP.$0:0;bT=bQ!=null&&bQ.$==1?bQ.$0:(bN.length?bN[0].length:0)-1;for(bU=0,bV=bT-bS+1-1;bU<=bV;bU++)M.set2D(bN,bO,bS+bU,M.get(bR,bU));};bm.setArray2Dfix2=function(bN,bO,bP,bQ,bR){var bS,bT,bU,bV;bS=bO!=null&&bO.$==1?bO.$0:0;bT=bP!=null&&bP.$==1?bP.$0:bN.length-1;for(bU=0,bV=bT-bS+1-1;bU<=bV;bU++)M.set2D(bN,bS+bU,bQ,M.get(bR,bU));};bm.setArray2D=function(bN,bO,bP,bQ,bR,bS){var bT,bU;bT=bO!=null&&bO.$==1?bO.$0:0;bU=bQ!=null&&bQ.$==1?bQ.$0:0;M.setSub2D(bN,bT,bU,(bP!=null&&bP.$==1?bP.$0:bN.length-1)-bT+1,(bR!=null&&bR.$==1?bR.$0:(bN.length?bN[0].length:0)-1)-bU+1,bS);};bn.filter=function(bN,bO){var bP;return bO!=null&&bO.$==1&&(bN(bO.$0)&&(bP=bO.$0,true))?bO:null;};bn.fold=function(bN,bO,bP){return bP==null?bO:bN(bO,bP.$0);};bn.foldBack=function(bN,bO,bP){return bO==null?bP:bN(bO.$0,bP);};bn.ofNullable=function(bN){return bN==null?null:{$:1,$0:C.get(bN)};};bn.ofObj=function(bN){return bN==null?null:{$:1,$0:bN};};bn.toArray=function(bN){return bN==null?[]:[bN.$0];};bn.toList=function(bN){return bN==null?bl.Empty:O.ofArray([bN.$0]);};bn.toNullable=function(bN){return bN!=null&&bN.$==1?bN.$0:null;};bn.toObj=function(bN){return bN==null?null:bN.$0;};bo.CopyTo=function(bN,bO,bP){M.blit(bN,0,bO,bP,M.length(bN));};bo.Contains=function(bN,bO){return N.exists(function(bP){return by.Equals(bO,bP);},bN);};bo.Clear=function(bN){bN.splice(0,M.length(bN));};bp=b.Random=bG.Class({NextBytes:function(bN){var bO,bP;for(bO=0,bP=M.length(bN)-1;bO<=bP;bO++)M.set(bN,bO,bM.floor(bM.random()*256));},Next:function(bN,bO){return bN>bO?B.FailWith("'minValue' cannot be greater than maxValue."):bN+bM.floor(bM.random()*(bO-bN));},Next$1:function(bN){return bN<0?B.FailWith("'maxValue' must be greater than zero."):bM.floor(bM.random()*bN);},Next$2:function(){return bM.floor(bM.random()*2147483648);}},j,bp);bp.New=bG.Ctor(function(){j.New.call(this);},bp);bq.New=function(bN){return[bN];};br.MapError=function(bN,bO){return bO.$==1?{$:1,$0:bN(bO.$0)}:{$:0,$0:bO.$0};};br.Map=function(bN,bO){return bO.$==1?{$:1,$0:bO.$0}:{$:0,$0:bN(bO.$0)};};br.Bind=function(bN,bO){return bO.$==1?{$:1,$0:bO.$0}:bN(bO.$0);};N.enumFinally=function(bN,bO){return{GetEnumerator:function(){var bP;try{bP=J.Get(bN);}catch(bQ){bO();throw bQ;}return new K.New(null,null,function(bR){return bP.MoveNext()&&(bR.c=bP.Current(),true);},function(){bP.Dispose();bO();});}};};N.enumUsing=function(bN,bO){return{GetEnumerator:function(){var bP,bQ;try{bP=J.Get(bO(bN));}catch(bR){bQ=bN;bQ.Dispose();throw bR;}return new K.New(null,null,function(bS){return bP.MoveNext()&&(bS.c=bP.Current(),true);},function(){var bS;bP.Dispose();bS=bN;bS.Dispose();});}};};N.enumWhile=function(bN,bO){return{GetEnumerator:function(){function bP(bQ){var bR;while(true){bR=bQ.s;if(by.Equals(bR,null)){if(bN()){bQ.s=J.Get(bO);bQ=bQ;}else return false;}else if(bR.MoveNext()){bQ.c=bR.Current();return true;}else{bR.Dispose();bQ.s=null;bQ=bQ;}}}return new K.New(null,null,bP,function(bQ){var bR;bR=bQ.s;!by.Equals(bR,null)?bR.Dispose():void 0;});}};};bs.createEvent=function(bN,bO,bP){var bQ;bQ={AddHandler:bN,RemoveHandler:bO,Subscribe:function(bR){var bS;bS=bP(function(){return function(bT){return bR.OnNext(bT);};});bN(bS);return{Dispose:function(){return bO(bS);}};}};j.New.call(bQ);return bQ;};N.allPairs=function(bN,bO){var bP;bP=N.cache(bO);return N.collect(function(bQ){return N.map(function(bR){return[bQ,bR];},bP);},bN);};N.append=function(bN,bO){return{GetEnumerator:function(){var bP,bQ;bP=J.Get(bN);bQ=[true];return new K.New(bP,null,function(bR){var bS;return bR.s.MoveNext()?(bR.c=bR.s.Current(),true):(bS=bR.s,!by.Equals(bS,null)?bS.Dispose():void 0,bR.s=null,bQ[0]&&(bQ[0]=false,bR.s=J.Get(bO),bR.s.MoveNext()?(bR.c=bR.s.Current(),true):(bR.s.Dispose(),bR.s=null,false)));},function(bR){var bS;bS=bR.s;!by.Equals(bS,null)?bS.Dispose():void 0;});}};};N.average=function(bN){var bO,bP;bO=N.fold(function(bQ,bR){return(function(bS){var bT,bU;bT=bS[0];bU=bS[1];return function(bV){return[bT+1,bU+bV];};}(bQ))(bR);},[0,0],bN);bP=bO[0];return bP===0?N.seqEmpty():bO[1]/bP;};N.averageBy=function(bN,bO){var bP,bQ;bP=N.fold(function(bR,bS){return(function(bT){var bU,bV;bU=bT[0];bV=bT[1];return function(bW){return[bU+1,bV+bN(bW)];};}(bR))(bS);},[0,0],bO);bQ=bP[0];return bQ===0?N.seqEmpty():bP[1]/bQ;};N.cache=function(bN){var bO,bP;bO=[];bP=[J.Get(bN)];return{GetEnumerator:function(){return new K.New(0,null,function(bQ){var bR;return bQ.s<bO.length?(bQ.c=bO[bQ.s],bQ.s=bQ.s+1,true):(bR=bP[0],by.Equals(bR,null)?false:bR.MoveNext()?(bQ.s=bQ.s+1,bQ.c=bR.Current(),bO.push(bQ.c),true):(bR.Dispose(),bP[0]=null,false));},void 0);}};};N.choose=function(bN,bO){return N.collect(function(bP){var bQ;bQ=bN(bP);return bQ==null?bl.Empty:O.ofArray([bQ.$0]);},bO);};N.collect=function(bN,bO){return N.concat(N.map(bN,bO));};N.compareWith=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=J.Get(bO);try{bS=J.Get(bP);try{bT=0;bU=true;while(bU&&bT===0)if(bQ.MoveNext())bT=bS.MoveNext()?bN(bQ.Current(),bS.Current()):1;else if(bS.MoveNext())bT=-1;else bU=false;bR=bT;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.concat=function(bN){return{GetEnumerator:function(){var bO;function bP(bQ){var bR;while(true){bR=bQ.s;if(by.Equals(bR,null)){if(bO.MoveNext()){bQ.s=J.Get(bO.Current());bQ=bQ;}else{bO.Dispose();return false;}}else if(bR.MoveNext()){bQ.c=bR.Current();return true;}else{bQ.Dispose();bQ.s=null;bQ=bQ;}}}bO=J.Get(bN);return new K.New(null,null,bP,function(bQ){var bR;bR=bQ.s;!by.Equals(bR,null)?bR.Dispose():void 0;!by.Equals(bO,null)?bO.Dispose():void 0;});}};};N.countBy=function(bN,bO){return N.delay(function(){return M.countBy(bN,M.ofSeq(bO));});};N.delay=function(bN){return{GetEnumerator:function(){return J.Get(bN());}};};N.distinct=function(bN){return N.distinctBy(a.id,bN);};N.distinctBy=function(bN,bO){return{GetEnumerator:function(){var bP,bQ;bP=J.Get(bO);bQ=new bf.New$3();return new K.New(null,null,function(bR){var bS,bT;if(bP.MoveNext()){bS=bP.Current();bT=bQ.Add(bN(bS));while(!bT&&bP.MoveNext()){bS=bP.Current();bT=bQ.Add(bN(bS));}return bT&&(bR.c=bS,true);}else return false;},function(){bP.Dispose();});}};};N.splitInto=function(bN,bO){bN<=0?B.FailWith("Count must be positive"):void 0;return N.delay(function(){return M.splitInto(bN,M.ofSeq(bO));});};N.exactlyOne=function(bN){var bO,bP;bO=J.Get(bN);try{return bO.MoveNext()?(bP=bO.Current(),bO.MoveNext()?B.InvalidOp("Sequence contains more than one element"):bP):B.InvalidOp("Sequence contains no elements");}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.tryExactlyOne=function(bN){var bO,bP;bO=J.Get(bN);try{return bO.MoveNext()?(bP=bO.Current(),bO.MoveNext()?null:{$:1,$0:bP}):null;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.exists=function(bN,bO){var bP,bQ;bP=J.Get(bO);try{bQ=false;while(!bQ&&bP.MoveNext())bQ=bN(bP.Current());return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.exists2=function(bN,bO,bP){var bQ,bR,bS,bT;bQ=J.Get(bO);try{bS=J.Get(bP);try{bT=false;while(!bT&&bQ.MoveNext()&&bS.MoveNext())bT=bN(bQ.Current(),bS.Current());bR=bT;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.filter=function(bN,bO){return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(null,null,function(bQ){var bR,bS,bT;bR=bP.MoveNext();bS=bP.Current();bT=false;while(bR)if(bN(bS)){bQ.c=bS;bT=true;bR=false;}else if(bP.MoveNext())bS=bP.Current();else bR=false;return bT;},function(){bP.Dispose();});}};};N.find=function(bN,bO){var bP;bP=N.tryFind(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.findIndex=function(bN,bO){var bP;bP=N.tryFindIndex(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.fold=function(bN,bO,bP){var bQ,bR;bQ=bO;bR=J.Get(bP);try{while(bR.MoveNext())bQ=bN(bQ,bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.forall=function(bN,bO){return!N.exists(function(bP){return!bN(bP);},bO);};N.forall2=function(bN,bO,bP){return!N.exists2(function(bQ,bR){return!bN(bQ,bR);},bO,bP);};N.groupBy=function(bN,bO){return N.delay(function(){return M.groupBy(bN,M.ofSeq(bO));});};N.head=function(bN){var bO;bO=J.Get(bN);try{return bO.MoveNext()?bO.Current():N.insufficient();}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.init=function(bN,bO){return N.take(bN,N.initInfinite(bO));};N.initInfinite=function(bN){return{GetEnumerator:function(){return new K.New(0,null,function(bO){bO.c=bN(bO.s);bO.s=bO.s+1;return true;},void 0);}};};N.isEmpty=function(bN){var bO;bO=J.Get(bN);try{return!bO.MoveNext();}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.iter=function(bN,bO){var bP;bP=J.Get(bO);try{while(bP.MoveNext())bN(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.iter2=function(bN,bO,bP){var bQ,bR,bS;bQ=J.Get(bO);try{bS=J.Get(bP);try{while(bQ.MoveNext()&&bS.MoveNext())bN(bQ.Current(),bS.Current());bR=void 0;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.iteri=function(bN,bO){var bP,bQ;bP=0;bQ=J.Get(bO);try{while(bQ.MoveNext()){bN(bP,bQ.Current());bP=bP+1;}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.length=function(bN){var bO,bP;bO=0;bP=J.Get(bN);try{while(bP.MoveNext())bO=bO+1;return bO;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.map=function(bN,bO){return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(null,null,function(bQ){return bP.MoveNext()&&(bQ.c=bN(bP.Current()),true);},function(){bP.Dispose();});}};};N.mapi=function(bN,bO){return N.map2(bN,N.initInfinite(a.id),bO);};N.map2=function(bN,bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=J.Get(bO);bR=J.Get(bP);return new K.New(null,null,function(bS){return bQ.MoveNext()&&bR.MoveNext()&&(bS.c=bN(bQ.Current(),bR.Current()),true);},function(){bQ.Dispose();bR.Dispose();});}};};N.maxBy=function(bN,bO){var bP,bQ,bR,bS,bT;bP=J.Get(bO);try{if(!bP.MoveNext())N.seqEmpty();bQ=bP.Current();bR=bN(bQ);while(bP.MoveNext()){bS=bP.Current();bT=bN(bS);by.Compare(bT,bR)===1?(bQ=bS,bR=bT):void 0;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.minBy=function(bN,bO){var bP,bQ,bR,bS,bT;bP=J.Get(bO);try{if(!bP.MoveNext())N.seqEmpty();bQ=bP.Current();bR=bN(bQ);while(bP.MoveNext()){bS=bP.Current();bT=bN(bS);by.Compare(bT,bR)===-1?(bQ=bS,bR=bT):void 0;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.max=function(bN){var bO,bP,bQ;bO=J.Get(bN);try{if(!bO.MoveNext())N.seqEmpty();bP=bO.Current();while(bO.MoveNext()){bQ=bO.Current();by.Compare(bQ,bP)===1?bP=bQ:void 0;}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.min=function(bN){var bO,bP,bQ;bO=J.Get(bN);try{if(!bO.MoveNext())N.seqEmpty();bP=bO.Current();while(bO.MoveNext()){bQ=bO.Current();by.Compare(bQ,bP)===-1?bP=bQ:void 0;}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.nth=function(bN,bO){var bP,bQ;if(bN<0)B.FailWith("negative index requested");bP=-1;bQ=J.Get(bO);try{while(bP<bN){!bQ.MoveNext()?N.insufficient():void 0;bP=bP+1;}return bQ.Current();}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.pairwise=function(bN){return N.map(function(bO){return[M.get(bO,0),M.get(bO,1)];},N.windowed(2,bN));};N.pick=function(bN,bO){var bP;bP=N.tryPick(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.readOnly=function(bN){return{GetEnumerator:function(){return J.Get(bN);}};};N.reduce=function(bN,bO){var bP,bQ;bP=J.Get(bO);try{if(!bP.MoveNext())N.seqEmpty();bQ=bP.Current();while(bP.MoveNext())bQ=bN(bQ,bP.Current());return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.scan=function(bN,bO,bP){return{GetEnumerator:function(){var bQ;bQ=J.Get(bP);return new K.New(false,null,function(bR){return bR.s?bQ.MoveNext()&&(bR.c=bN(bR.c,bQ.Current()),true):(bR.c=bO,bR.s=true,true);},function(){bQ.Dispose();});}};};N.skip=function(bN,bO){return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(true,null,function(bQ){var bR,bS;if(bQ.s){for(bR=1,bS=bN;bR<=bS;bR++)if(!bP.MoveNext())N.insufficient();bQ.s=false;}else null;return bP.MoveNext()&&(bQ.c=bP.Current(),true);},function(){bP.Dispose();});}};};N.skipWhile=function(bN,bO){return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(true,null,function(bQ){var bR,bS;if(bQ.s){bR=true;bS=false;while(bR)if(bP.MoveNext()){if(!bN(bP.Current()))bR=false;}else{bR=false;bS=true;}bQ.s=false;return bS?false:(bQ.c=bP.Current(),true);}else return bP.MoveNext()&&(bQ.c=bP.Current(),true);},function(){bP.Dispose();});}};};N.sort=function(bN){return N.sortBy(a.id,bN);};N.sortBy=function(bN,bO){return N.delay(function(){var bP;bP=M.ofSeq(bO);M.sortInPlaceBy(bN,bP);return bP;});};N.sortByDescending=function(bN,bO){return N.delay(function(){var bP;bP=M.ofSeq(bO);M.sortInPlaceByDescending(bN,bP);return bP;});};N.sortDescending=function(bN){return N.sortByDescending(a.id,bN);};N.sum=function(bN){return N.fold(function(bO,bP){return bO+bP;},0,bN);};N.sumBy=function(bN,bO){return N.fold(function(bP,bQ){return bP+bN(bQ);},0,bO);};N.take=function(bN,bO){bN<0?N.nonNegative():void 0;return{GetEnumerator:function(){var bP;bP=[J.Get(bO)];return new K.New(0,null,function(bQ){var bR;bQ.s=bQ.s+1;return bQ.s>bN?false:(bR=bP[0],by.Equals(bR,null)?N.insufficient():bR.MoveNext()?(bQ.c=bR.Current(),bQ.s===bN?(bR.Dispose(),bP[0]=null):void 0,true):(bR.Dispose(),bP[0]=null,N.insufficient()));},function(){var bQ;bQ=bP[0];!by.Equals(bQ,null)?bQ.Dispose():void 0;});}};};N.takeWhile=function(bN,bO){return N.delay(function(){return N.enumUsing(J.Get(bO),function(bP){return N.enumWhile(function(){return bP.MoveNext()&&bN(bP.Current());},N.delay(function(){return[bP.Current()];}));});});};N.transpose=function(bN){return N.delay(function(){return M.transposeArray(M.ofSeq(N.map(M.ofSeq,bN)));});};N.truncate=function(bN,bO){return N.delay(function(){return N.enumUsing(J.Get(bO),function(bP){var bQ;bQ=[0];return N.enumWhile(function(){return bP.MoveNext()&&bQ[0]<bN;},N.delay(function(){bQ[0]++;return[bP.Current()];}));});});};N.tryFind=function(bN,bO){var bP,bQ,bR;bP=J.Get(bO);try{bQ=null;while(bQ==null&&bP.MoveNext()){bR=bP.Current();bN(bR)?bQ={$:1,$0:bR}:void 0;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.findBack=function(bN,bO){var bP;bP=M.tryFindBack(bN,M.ofSeq(bO));return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.tryFindIndex=function(bN,bO){var bP,bQ,bR;bP=J.Get(bO);try{bQ=true;bR=0;while(bQ&&bP.MoveNext())if(bN(bP.Current()))bQ=false;else bR=bR+1;return bQ?null:{$:1,$0:bR};}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.findIndexBack=function(bN,bO){var bP;bP=M.tryFindIndexBack(bN,M.ofSeq(bO));return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.tryPick=function(bN,bO){var bP,bQ;bP=J.Get(bO);try{bQ=null;while(by.Equals(bQ,null)&&bP.MoveNext())bQ=bN(bP.Current());return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.unfold=function(bN,bO){return{GetEnumerator:function(){return new K.New(bO,null,function(bP){var bQ;bQ=bN(bP.s);return bQ==null?false:(bP.c=bQ.$0[0],bP.s=bQ.$0[1],true);},void 0);}};};N.windowed=function(bN,bO){bN<=0?B.FailWith("The input must be positive."):void 0;return N.delay(function(){return N.enumUsing(J.Get(bO),function(bP){var bQ;bQ=[];return N.append(N.enumWhile(function(){return bQ.length<bN&&bP.MoveNext();},N.delay(function(){bQ.push(bP.Current());return[];})),N.delay(function(){return bQ.length===bN?N.append([bQ.slice(0)],N.delay(function(){return N.enumWhile(function(){return bP.MoveNext();},N.delay(function(){bQ.shift();bQ.push(bP.Current());return[bQ.slice(0)];}));})):[];}));});});};N.zip=function(bN,bO){return N.map2(function(bP,bQ){return[bP,bQ];},bN,bO);};N.map3=function(bN,bO,bP,bQ){return{GetEnumerator:function(){var bR,bS,bT;bR=J.Get(bO);bS=J.Get(bP);bT=J.Get(bQ);return new K.New(null,null,function(bU){return bR.MoveNext()&&bS.MoveNext()&&bT.MoveNext()&&(bU.c=bN(bR.Current(),bS.Current(),bT.Current()),true);},function(){bR.Dispose();bS.Dispose();bT.Dispose();});}};};N.zip3=function(bN,bO,bP){return N.map3(function(bQ,bR,bS){return[bQ,bR,bS];},bN,bO,bP);};N.fold2=function(bN,bO,bP,bQ){return M.fold2(bN,bO,M.ofSeq(bP),M.ofSeq(bQ));};N.foldBack=function(bN,bO,bP){return M.foldBack(bN,M.ofSeq(bO),bP);};N.foldBack2=function(bN,bO,bP,bQ){return M.foldBack2(bN,M.ofSeq(bO),M.ofSeq(bP),bQ);};N.iteri2=function(bN,bO,bP){var bQ,bR,bS,bT;bQ=0;bR=J.Get(bO);try{bT=J.Get(bP);try{while(bR.MoveNext()&&bT.MoveNext()){bN(bQ,bR.Current(),bT.Current());bQ=bQ+1;}bS=void 0;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.mapi2=function(bN,bO,bP){return N.map3(bN,N.initInfinite(a.id),bO,bP);};N.mapFold=function(bN,bO,bP){return M.mapFold(bN,bO,M.ofSeq(bP));};N.mapFoldBack=function(bN,bO,bP){return M.mapFoldBack(bN,M.ofSeq(bO),bP);};N.permute=function(bN,bO){return N.delay(function(){return M.permute(bN,M.ofSeq(bO));});};N.reduceBack=function(bN,bO){return M.reduceBack(bN,M.ofSeq(bO));};N.replicate=function(bN,bO){bN<0?N.nonNegative():void 0;return N.delay(function(){return N.map(function(){return bO;},B.range(0,bN-1));});};N.rev=function(bN){return N.delay(function(){return M.ofSeq(bN).slice().reverse();});};N.scanBack=function(bN,bO,bP){return N.delay(function(){return M.scanBack(bN,M.ofSeq(bO),bP);});};N.indexed=function(bN){return N.mapi(function(bO,bP){return[bO,bP];},bN);};N.sortWith=function(bN,bO){return N.delay(function(){var bP;bP=M.ofSeq(bO);M.sortInPlaceWith(bN,bP);return bP;});};N.tail=function(bN){return N.skip(1,bN);};N.seqEmpty=function(){return B.FailWith("The input sequence was empty.");};bt.CopyTo=function(bN,bO,bP){M.blit(bO,0,bO,bP,M.length(bN));};bt.Contains=function(bN,bO){return N.exists(function(bP){return by.Equals(bO,bP);},bN);};bt.Clear=function(bN){bN.splice(0,M.length(bN));};bu.RegexEscape=function(bN){return bN.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bu.SplitWith=function(bN,bO){return bN.split(bO);};bu.Join=function(bN,bO){return bO.join(bN);};bu.TrimEndWS=function(bN){return bN.replace(new a.RegExp("\\s+$"),"");};bu.TrimStartWS=function(bN){return bN.replace(new a.RegExp("^\\s+"),"");};bu.Trim=function(bN){return bN.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bu.StartsWith=function(bN,bO){return bN.substring(0,bO.length)==bO;};bu.Substring=function(bN,bO,bP){return bN.substr(bO,bP);};bu.ReplaceOnce=function(bN,bO,bP){return bN.replace(bO,bP);};bu.Remove=function(bN,bO,bP){return bN.substring(0,bO)+bN.substring(bO+bP);};bu.PadRightWith=function(bN,bO,bP){return bO>bN.length?bN+a.Array(bO-bN.length+1).join(bP):bN;};bu.PadLeftWith=function(bN,bO,bP){return bO>bN.length?a.Array(bO-bN.length+1).join(bP)+bN:bN;};bu.LastIndexOf=function(bN,bO,bP){return bN.lastIndexOf(bO,bP);};bu.IsNullOrWhiteSpace=function(bN){return bN==null||(new a.RegExp("^\\s*$")).test(bN);};bu.IsNullOrEmpty=function(bN){return bN==null||bN=="";};bu.Insert=function(bN,bO,bP){return bN.substring(0,bO-1)+bP+bN.substring(bO);};bu.IndexOf=function(bN,bO,bP){return bN.indexOf(bO,bP);};bu.EndsWith=function(bN,bO){return bN.substring(bN.length-bO.length)==bO;};bu.collect=function(bN,bO){return M.init(bO.length,function(bP){return bN(bO[bP]);}).join("");};bu.concat=function(bN,bO){return M.ofSeq(bO).join(bN);};bu.exists=function(bN,bO){return N.exists(bN,bu.protect(bO));};bu.forall=function(bN,bO){return N.forall(bN,bu.protect(bO));};bu.init=function(bN,bO){return M.init(bN,bO).join("");};bu.iter=function(bN,bO){N.iter(bN,bu.protect(bO));};bu.iteri=function(bN,bO){N.iteri(bN,bu.protect(bO));};bu.length=function(bN){return bu.protect(bN).length;};bu.map=function(bN,bO){return bu.collect(bN,bu.protect(bO));};bu.mapi=function(bN,bO){return M.ofSeq(N.mapi(bN,bO)).join("");};bu.replicate=function(bN,bO){return M.create(bN,bO).join("");};bu.protect=function(bN){return bN===null?"":bN;};bu.SFormat=function(bN,bO){return bN.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bP,bQ,bR){var bS,bT,bU;bS=bJ(M.get(bO,+bQ));return!by.Equals(bR,void 0)?(bT=+bR,(bU=bM.abs(bT),bU>bS.length?bT>0?bu.PadLeft(bS,bU):bu.PadRight(bS,bU):bS)):bS;});};bu.Filter=function(bN,bO){return M.ofSeq(N.choose(function(bP){return bN(bP)?{$:1,$0:bP}:null;},bO)).join("");};bu.SplitStrings=function(bN,bO,bP){return bu.Split(bN,new a.RegExp(bu.concat("|",M.map(bu.RegexEscape,bO))),bP);};bu.SplitChars=function(bN,bO,bP){return bu.Split(bN,new a.RegExp("["+bu.RegexEscape(bO.join(""))+"]"),bP);};bu.Split=function(bN,bO,bP){return bP===1?M.filter(function(bQ){return bQ!=="";},bu.SplitWith(bN,bO)):bu.SplitWith(bN,bO);};bu.TrimEnd=function(bN,bO){var bP,bQ;if(by.Equals(bO,null)||bO.length==0)return bu.TrimEndWS(bN);else{bP=bN.length-1;bQ=true;while(bP>=0&&bQ)(function(){var bR;bR=bN[bP];return M.exists(function(bS){return bR===bS;},bO)?void(bP=bP-1):void(bQ=false);}());return bu.Substring(bN,0,bP+1);}};bu.TrimStart=function(bN,bO){var bP,bQ;if(by.Equals(bO,null)||bO.length==0)return bu.TrimStartWS(bN);else{bP=0;bQ=true;while(bP<bN.length&&bQ)(function(){var bR;bR=bN[bP];return M.exists(function(bS){return bR===bS;},bO)?void(bP=bP+1):void(bQ=false);}());return bN.substring(bP);}};bu.ToCharArrayRange=function(bN,bO,bP){return M.init(bP,function(bQ){return bN[bO+bQ];});};bu.ToCharArray=function(bN){return M.init(bN.length,function(bO){return bN[bO];});};bu.ReplaceChar=function(bN,bO,bP){return bu.Replace(bN,bO,bP);};bu.Replace=function(bN,bO,bP){function bQ(bR){var bS,bT,bU;bS=bR.indexOf(bO);return bS!==-1?(bT=bu.ReplaceOnce(bR,bO,bP),(bU=bS+bP.length,bu.Substring(bT,0,bS+bP.length)+bQ(bT.substring(bU)))):bR;}return bQ(bN);};bu.PadRight=function(bN,bO){return bu.PadRightWith(bN,bO," ");};bu.PadLeft=function(bN,bO){return bu.PadLeftWith(bN,bO," ");};bu.CopyTo=function(bN,bO,bP,bQ,bR){M.blit(bu.ToCharArray(bN),bO,bP,bQ,bR);};bu.Compare=function(bN,bO){return by.Compare(bN,bO);};bv=b.Task=bG.Class({Start:function(){var bN;bN=this;this.status===0?(this.status=2,E.scheduler().Fork(function(){var bO;bN.status=3;try{bN.Execute();bN.status=5;}catch(bP){bP instanceof _3&&(by.Equals(bP.ct,bN.token)&&(bO=bP,true))?(bL.log("Task cancellation caught:",bO),bN.exc=new _8.New$3([bO]),bN.status=6):(bL.log("Task error caught:",bP),bN.exc=new _8.New$3([bP]),bN.status=7);}bN.RunContinuations();})):B.InvalidOp("Task not in initial state");},StartContinuation:function(){var bN;bN=this;this.status===1?(this.status=2,E.scheduler().Fork(function(){if(bN.status===2){bN.status=3;try{bN.Execute();bN.status=5;}catch(bO){bN.exc=new _8.New$3([bO]);bN.status=7;}bN.RunContinuations();}})):void 0;},ContinueWith:function(bN,bO){var bP,bQ;bP=this;bQ=new bw.New$4(function(){return bN(bP);},bO,1,null,void 0);this.get_IsCompleted()?bQ.StartContinuation():this.continuations.push(bQ);return bQ;},ContinueWith$1:function(bN,bO){var bP,bQ;bP=this;bQ=new bv.New$4(function(){return bN(bP);},bO,1,null);this.get_IsCompleted()?bQ.StartContinuation():this.continuations.push(bQ);return bQ;},RunContinuations:function(){var bN,bO,bP;bN=this.continuations;for(bO=0,bP=bN.length-1;bO<=bP;bO++)M.get(bN,bO).StartContinuation();},OnCompleted:function(bN){if(this.get_IsCompleted())bN();else{this.get_Status()===0?this.Start():void 0;this.ContinueWith$1(function(){return bN();},E.noneCT());}},get_Status:function(){return this.status;},get_IsFaulted:function(){return this.status===7;},get_IsCompleted:function(){return this.status===5||this.status===7||this.status===6;},get_IsCanceled:function(){return this.status===6;},get_Exception:function(){return this.exc;},Execute:function(){this.action();}},j,bv);bv.Yield=function(){return new bv.New$3(function(){return null;});};bv.WhenAll=function(bN){var bO,bP,bQ,bR,bS,bT;bO=M.length(bN);bP=[0];bQ=new a.Array(bO);bR=new bx.New();for(bS=0,bT=bO-1;bS<=bT;bS++)(function(bU){M.get(bN,bS).ContinueWith$1(function(bV){return bV.get_IsFaulted()?void bR.TrySetException$1(bV.get_Exception()):bV.get_IsCanceled()?void bR.TrySetCanceled$1():(bP[0]++,bQ[bU]=bV.get_Result(),bP[0]===bO?bR.SetResult(bQ):null);},E.noneCT());}(bS));return bR.get_Task();};bv.WhenAll$1=function(bN){var bO,bP,bQ,bR,bS;bO=M.length(bN);bP=[0];bQ=new bx.New();for(bR=0,bS=bO-1;bR<=bS;bR++)M.get(bN,bR).ContinueWith$1(function(bT){return bT.get_IsFaulted()?void bQ.TrySetException$1(bT.get_Exception()):bT.get_IsCanceled()?void bQ.TrySetCanceled$1():(bP[0]++,bP[0]===bO?void bQ.TrySetResult():null);},E.noneCT());return bQ.get_Task();};bv.WhenAny=function(bN){var bO,bP,bQ;bO=new bx.New();for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)M.get(bN,bP).ContinueWith(function(bR){bO.TrySetResult(bR);},E.noneCT());return bO.get_Task();};bv.WhenAny$1=function(bN){var bO,bP,bQ;bO=new bx.New();for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)M.get(bN,bP).ContinueWith$1(function(bR){bO.TrySetResult(bR);},E.noneCT());return bO.get_Task();};bv.Delay=function(bN,bO){return E.StartAsTask(E.Sleep(bN),{$:1,$0:bO});};bv.Delay$1=function(bN){return E.StartAsTask(E.Sleep(bN),null);};bv.Run=function(bN,bO){var bP;bP=bN();return bO.c?bv.FromCanceled(bO):(bP.get_Status()===0?bP.Start():void 0,bP);};bv.Run$1=function(bN,bO){var bP;bP=new bw.New$4(bN,bO,0,null,void 0);bP.Start();return bP;};bv.Run$2=function(bN,bO){var bP;bP=bN();return bO.c?bv.FromCanceled$1(bO):(bP.get_Status()===0?bP.Start():void 0,bP);};bv.Run$3=function(bN,bO){var bP;bP=new bv.New$4(bN,bO,0,null);bP.Start();return bP;};bv.FromResult=function(bN){return new bw.New$4(null,E.noneCT(),5,null,bN);};bv.FromException=function(bN){return new bw.New$4(null,E.noneCT(),7,new _8.New$3([bN]),null);};bv.FromException$1=function(bN){return new bv.New$4(null,E.noneCT(),7,new _8.New$3([bN]));};bv.FromCanceled=function(bN){return new bw.New$4(null,bN,6,new _8.New$3([new ba.New()]),null);};bv.FromCanceled$1=function(bN){return new bv.New$4(null,bN,6,new _8.New$3([new ba.New()]));};bv.New=bG.Ctor(function(bN,bO,bP){bv.New$4.call(this,function(){return bN(bO);},bP,0,null);},bv);bv.New$1=bG.Ctor(function(bN,bO){bv.New$4.call(this,function(){return bN(bO);},E.noneCT(),0,null);},bv);bv.New$2=bG.Ctor(function(bN,bO){bv.New$4.call(this,bN,bO,0,null);},bv);bv.New$3=bG.Ctor(function(bN){bv.New$4.call(this,bN,E.noneCT(),0,null);},bv);bv.New$4=bG.Ctor(function(bN,bO,bP,bQ){j.New.call(this);this.action=bN;this.token=bO;this.status=bP;this.continuations=[];this.exc=bQ;},bv);bw=b.Task1=bG.Class({Execute:function(){this.result=this.func();},get_Result:function(){var bN;switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return B.InvalidOp("Task has not been completed, has no Result");}}},bv,bw);bw.New=bG.Ctor(function(bN,bO,bP){bw.New$4.call(this,function(){return bN(bO);},bP,0,null,void 0);},bw);bw.New$1=bG.Ctor(function(bN,bO){bw.New$4.call(this,function(){return bN(bO);},E.noneCT(),0,null,void 0);},bw);bw.New$2=bG.Ctor(function(bN,bO){bw.New$4.call(this,bN,bO,0,null,void 0);},bw);bw.New$3=bG.Ctor(function(bN){bw.New$4.call(this,bN,E.noneCT(),0,null,void 0);},bw);bw.New$4=bG.Ctor(function(bN,bO,bP,bQ,bR){bv.New$4.call(this,null,bO,bP,bQ);this.func=bN;this.result=bR;},bw);bx=b.TaskCompletionSource=bG.Class({TrySetResult:function(bN){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bN,this.task.RunContinuations(),true);},TrySetException:function(bN){return this.TrySetException$1(new _8.New$2(bN));},TrySetException$1:function(bN){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _8.New$3([bN]),this.task.RunContinuations(),true);},TrySetCanceled:function(bN){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.token=bN,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bN){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bN;this.task.RunContinuations();},SetException:function(bN){this.SetException$1(new _8.New$2(bN));},SetException$1:function(bN){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _8.New$3([bN]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},j,bx);bx.New=bG.Ctor(function(){j.New.call(this);this.task=new bw.New$4(null,E.noneCT(),1,null,void 0);},bx);by.Hash=function(bN){var bO;bO=typeof bN;return bO=="function"?0:bO=="boolean"?bN?1:0:bO=="number"?bN:bO=="string"?by.hashString(bN):bO=="object"?bN==null?0:bN instanceof a.Array?by.hashArray(bN):by.hashObject(bN):0;};by.hashObject=function(bN){var bO,bP;if("GetHashCode"in bN)return bN.GetHashCode();else{bO=[0];for(var bQ in bN)if(function(bR){bO[0]=by.hashMix(by.hashMix(bO[0],by.hashString(bR)),by.Hash(bN[bR]));return false;}(bQ))break;return bO[0];}};by.hashString=function(bN){var bO,bP,bQ;if(bN===null)return 0;else{bO=5381;for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)bO=by.hashMix(bO,bN[bP].charCodeAt());return bO;}};by.hashArray=function(bN){var bO,bP,bQ;bO=-34948909;for(bP=0,bQ=M.length(bN)-1;bP<=bQ;bP++)bO=by.hashMix(bO,by.Hash(M.get(bN,bP)));return bO;};by.hashMix=function(bN,bO){return(bN<<5)+bN+bO;};by.Equals=function(bN,bO){var bP,bQ,bR,bS;if(bN===bO)return true;else{bP=typeof bN;if(bP=="object"){if(bN===null||bN===void 0||bO===null||bO===void 0)return false;else if("Equals"in bN)return bN.Equals(bO);else if(bN instanceof a.Array&&bO instanceof a.Array)return by.arrayEquals(bN,bO);else if(bN instanceof bK&&bO instanceof bK)return by.dateEquals(bN,bO);else{bQ=[true];for(var bT in bN)if(function(bU){bQ[0]=!bN.hasOwnProperty(bU)||bO.hasOwnProperty(bU)&&by.Equals(bN[bU],bO[bU]);return!bQ[0];}(bT))break;if(bQ[0]){for(var bU in bO)if(function(bV){bQ[0]=!bO.hasOwnProperty(bV)||bN.hasOwnProperty(bV);return!bQ[0];}(bU))break;}return bQ[0];}}else return bP=="function"&&("$Func"in bN?bN.$Func===bO.$Func&&bN.$Target===bO.$Target:"$Invokes"in bN&&"$Invokes"in bO&&by.arrayEquals(bN.$Invokes,bO.$Invokes));}};by.dateEquals=function(bN,bO){return bN.getTime()===bO.getTime();};by.arrayEquals=function(bN,bO){var bP,bQ;if(M.length(bN)===M.length(bO)){bP=true;bQ=0;while(bP&&bQ<M.length(bN)){!by.Equals(M.get(bN,bQ),M.get(bO,bQ))?bP=false:void 0;bQ=bQ+1;}return bP;}else return false;};by.Compare=function(bN,bO){var bP,bQ,bR,bS,bT,bU;if(bN===bO)return 0;else{bQ=typeof bN;switch(bQ=="function"?1:bQ=="boolean"?2:bQ=="number"?2:bQ=="string"?2:bQ=="object"?3:0){case 0:return typeof bO=="undefined"?0:-1;case 1:return B.FailWith("Cannot compare function values.");case 2:return bN<bO?-1:1;case 3:if(bN===null)bR=-1;else if(bO===null)bR=1;else if("CompareTo"in bN)bR=bN.CompareTo(bO);else if("CompareTo0"in bN)bR=bN.CompareTo0(bO);else if(bN instanceof a.Array&&bO instanceof a.Array)bR=by.compareArrays(bN,bO);else if(bN instanceof bK&&bO instanceof bK)bR=by.compareDates(bN,bO);else{bS=[0];for(var bV in bN)if(function(bW){return!bN.hasOwnProperty(bW)?false:!bO.hasOwnProperty(bW)?(bS[0]=1,true):(bS[0]=by.Compare(bN[bW],bO[bW]),bS[0]!==0);}(bV))break;if(bS[0]===0){for(var bW in bO)if(function(bX){return!bO.hasOwnProperty(bX)?false:!bN.hasOwnProperty(bX)&&(bS[0]=-1,true);}(bW))break;}bR=bS[0];}return bR;}}};by.compareDates=function(bN,bO){return by.Compare(bN.getTime(),bO.getTime());};by.compareArrays=function(bN,bO){var bP,bQ;if(M.length(bN)<M.length(bO))return -1;else if(M.length(bN)>M.length(bO))return 1;else{bP=0;bQ=0;while(bP===0&&bQ<M.length(bN)){bP=by.Compare(M.get(bN,bQ),M.get(bO,bQ));bQ=bQ+1;}return bP;}};bC.ValueNone={$:0};bC.get_Value=function(bN){return bN.$==1?bN.$0:B.InvalidOp("ValueOption.Value");};bD.filter=function(bN,bO){var bP;return bO.$==1&&bN(bO.$0)?bO:bC.ValueNone;};bD.fold=function(bN,bO,bP){return bP.$==0?bO:bN(bO,bP.$0);};bD.foldBack=function(bN,bO,bP){return bO.$==0?bP:bN(bO.$0,bP);};bD.ofNullable=function(bN){return bN==null?bC.ValueNone:{$:1,$0:C.get(bN)};};bD.ofObj=function(bN){return bN==null?bC.ValueNone:{$:1,$0:bN};};bD.toArray=function(bN){return bN.$==0?[]:[bN.$0];};bD.toList=function(bN){return bN.$==0?bl.Empty:O.ofArray([bN.$0]);};bD.toNullable=function(bN){return bN.$==1?bN.$0:null;};bD.toObj=function(bN){return bN.$==0?null:bN.$0;};bE.TryParseBool=function(bN,bO){var bP;bP=bN.toLowerCase();return bP==="true"?(bO.set(true),true):bP==="false"&&(bO.set(false),true);};bE.ParseBool=function(bN){var bO;bO=bN.toLowerCase();if(bO==="true")return true;else if(bO==="false")return false;else throw new _.New$1("String was not recognized as a valid Boolean.");};bE.TryParse=function(bN,bO,bP,bQ){var bR,bS;bR=+bN;bS=bR===bR-bR%1&&bR>=bO&&bR<=bP;bS?bQ.set(bR):void 0;return bS;};bE.Parse=function(bN,bO,bP,bQ){var bR;bR=+bN;if(bR!==bR-bR%1)throw new _.New$1("Input string was not in a correct format.");else if(bR<bO||bR>bP)throw new $.New$1(bQ);else return bR;};bE.ParseByte=function(bN){return bE.Parse(bN,0,255,"Value was either too large or too small for an unsigned byte.");};bE.TryParseByte=function(bN,bO){return bE.TryParse(bN,0,255,bO);};bE.ParseSByte=function(bN){return bE.Parse(bN,-128,127,"Value was either too large or too small for a signed byte.");};bE.TryParseSByte=function(bN,bO){return bE.TryParse(bN,-128,127,bO);};bE.ParseInt16=function(bN){return bE.Parse(bN,-32768,32767,"Value was either too large or too small for an Int16.");};bE.TryParseInt16=function(bN,bO){return bE.TryParse(bN,-32768,32767,bO);};bE.ParseInt32=function(bN){return bE.Parse(bN,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bE.TryParseInt32=function(bN,bO){return bE.TryParse(bN,-2147483648,2147483647,bO);};bE.ParseUInt16=function(bN){return bE.Parse(bN,0,65535,"Value was either too large or too small for an UInt16.");};bE.TryParseUInt16=function(bN,bO){return bE.TryParse(bN,0,65535,bO);};bE.ParseUInt32=function(bN){return bE.Parse(bN,0,4294967295,"Value was either too large or too small for an UInt32.");};bE.TryParseUInt32=function(bN,bO){return bE.TryParse(bN,0,4294967295,bO);};bE.ParseInt64=function(bN){return bE.Parse(bN,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bE.TryParseInt64=function(bN,bO){return bE.TryParse(bN,-9223372036854775808,9223372036854775807,bO);};bE.ParseUInt64=function(bN){return bE.Parse(bN,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bE.TryParseUInt64=function(bN,bO){return bE.TryParse(bN,0,18446744073709551615,bO);};}());
