(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;a=self;b=a.WebSharper=a.WebSharper||{};c=b.Sitelets=b.Sitelets||{};d=c.CorsAllows=c.CorsAllows||{};e=c.StringEncoding=c.StringEncoding||{};f=c.PathUtil=c.PathUtil||{};g=c.Route=c.Route||{};h=c.List=c.List||{};i=c.Router=c.Router||{};j=b&&b.Obj;k=c.RouterModule=c.RouterModule||{};l=k.ListArrayConverter=k.ListArrayConverter||{};m=c.RouterOperators=c.RouterOperators||{};n=a.StartupCode$WebSharper_Sitelets$Router=a.StartupCode$WebSharper_Sitelets$Router||{};o=b&&b.Strings;p=a.String;q=b&&b.List;r=b&&b.Seq;s=b&&b.Collections;t=s&&s.Map;u=b&&b.Arrays;v=a.IntelliFactory;w=v&&v.Runtime;x=s&&s.FSharpMap;y=b&&b.Unchecked;z=b&&b.Utils;A=a.console;B=b&&b.Lazy;C=b&&b.Nullable;D=b&&b.Numeric;E=b&&b.Operators;F=b&&b.Concurrency;G=a.jQuery;H=b&&b.Char;I=a.System;J=I&&I.Guid;K=b&&b.Slice;d.New=function(L,M,N,O,P,Q){return{Origins:L,Methods:M,Headers:N,ExposeHeaders:O,MaxAge:P,Credentials:Q};};e.read=function(L){var M;function N(O){var P;while(true){P=e.readEscapedFromChars(O);if(P[0]===-2)return null;else if(P[0]===-1)return{$:1,$0:(function(Q){return function(R){return o.concat(Q,R);};}(""))(M)};else{M.push(p.fromCharCode(P[0]));O=P[1];}}}M=[];return N(q.ofSeq(r.map(function(O){return O.charCodeAt();},L)));};e.readEscapedFromChars=function(L){var M,N,O,P,Q,R,S,T;function U(){var W,X;return M.$==1?(W=M.$1,(X=M.$0,(M=W,X))):-1;}function V(W){return W>="0".charCodeAt()&&W<="9".charCodeAt()?W-"0".charCodeAt():W>="a".charCodeAt()&&W<="f".charCodeAt()?W-"a".charCodeAt()+10:W>="A".charCodeAt()&&W<="F".charCodeAt()?W-"A".charCodeAt()+10:-2;}M=L;return[(N=U(),N==="~".charCodeAt()?(O=U(),O==="u".charCodeAt()?(P=U(),(Q=U(),(R=U(),(S=U(),P>=0&&Q>=0&&R>=0&&S>=0?e.op_PlusPlus(e.op_PlusPlus(e.op_PlusPlus(V(P),V(Q)),V(R)),V(S)):-2)))):(T=U(),O>=0&&T>=0?e.op_PlusPlus(V(O),V(T)):-2)):N),M];};e.op_PlusPlus=function(L,M){return(L<<4)+M;};e.write=function(L){return o.concat("",r.mapi(function(M,N){return e.writeEscapedAsString(M+1===L.length,N);},L));};e.writeEscapedAsString=function(L,M){var N;N=M.charCodeAt();return e.isUnreserved(L,M)?M:N<256?"~"+o.PadLeftWith(N.toString(16),2,"0"):"~u"+o.PadLeftWith(N.toString(16),4,"0");};e.isUnreserved=function(L,M){return M==="-"||(M==="."?!L:M==="_"||(M>="A"&&M<="Z"||(M>="a"&&M<="z"||M>="0"&&M<="9")));};f.WriteLink=function(L,M){var N;N=M.get_IsEmpty()?"":"?"+f.WriteQuery(M);return"/"+f.Concat(L)+N;};f.WriteQuery=function(L){function M(N,O){return N+"="+O;}return o.concat("&",r.map(function(N){return M(N[0],N[1]);},t.ToSeq(L)));};f.Concat=function(L){var M,N;M=[];N=true;q.iter(function(O){if(!o.IsNullOrEmpty(O)){N?N=false:M.push("/");M.push(O);}},L);return o.Join("",u.ofSeq(M));};g=c.Route=w.Class({ToLink:function(){return f.WriteLink(this.Segments,this.QueryArgs);}},null,g);g.FromHash=function(L,M){var N,O;N=L.indexOf("#");return N===-1?g.get_Empty():(O=L.substring(N+1),M!=null&&M.$0?O===""||O==="/"?g.get_Empty():o.StartsWith(O,"/")?g.FromUrl(O.substring(1),{$:1,$0:true}):g.Segment$2(O):g.FromUrl(L.substring(N),{$:1,$0:false}));};g.FromUrl=function(L,M){var N,O,P;N=(O=L.indexOf("?"),O===-1?[L,new x.New([])]:[o.Substring(L,0,O),g.ParseQuery(L.substring(O+1))]);P=g.get_Empty();return g.New(q.ofArray(o.SplitChars(N[0],["/"],M!=null&&M.$0?0:1)),N[1],P.FormData,P.Method,P.Body);};g.WriteQuery=function(L){return f.WriteQuery(L);};g.ParseQuery=function(L){return t.OfArray(u.ofSeq(u.choose(function(M){var N,O;N=o.SplitChars(M,["="],0);return!y.Equals(N,null)&&N.length===2?(O=u.get(N,1),{$:1,$0:[u.get(N,0),O]}):((function(P){return function(Q){return P("wrong format for query argument: "+z.toSafe(Q));};}(function(P){A.log(P);}))(M),null);},o.SplitChars(L,["&"],0))));};g.Combine=function(L){var M,N,O,P,Q,R,S;M=u.ofSeq(L);N=u.length(M);return N===0?g.get_Empty():N===1?u.get(M,0):(O=null,P=null,Q=[],R=new x.New([]),S=new x.New([]),u.iter(function(T){var U,V;U=T.Method;U!=null&&U.$==1?O=U:void 0;V=T.Body.f();V===null?void 0:P=V;R=t.FoldBack(function(W,X,Y){return Y.Add(W,X);},R,T.QueryArgs);S=t.FoldBack(function(W,X,Y){return Y.Add(W,X);},S,T.FormData);q.iter(function(W){Q.push(W);},T.Segments);},M),g.New(q.ofSeq(Q),R,S,O,B.CreateFromValue(P)));};g.Segment=function(L,M){var N;N=g.get_Empty();return g.New(L,N.QueryArgs,N.FormData,M,N.Body);};g.Segment$1=function(L){var M;M=g.get_Empty();return g.New(L,M.QueryArgs,M.FormData,M.Method,M.Body);};g.Segment$2=function(L){var M;M=g.get_Empty();return g.New(q.ofArray([L]),M.QueryArgs,M.FormData,M.Method,M.Body);};g.get_Empty=function(){return g.New(q.T.Empty,new x.New([]),new x.New([]),null,B.CreateFromValue(null));};g.New=function(L,M,N,O,P){return new g({Segments:L,QueryArgs:M,FormData:N,Method:O,Body:P});};h.startsWith=function(L,M){var N;switch(L.$==1?M.$==1?y.Equals(L.$0,M.$0)?(N=[M.$0,M.$1,L.$0,L.$1],1):2:2:0){case 0:return{$:1,$0:M};case 1:return h.startsWith(N[3],N[1]);case 2:return null;}};i.op_Addition=function(L,M){return i.New(function(N){return r.append(L.Parse(N),M.Parse(N));},L.Segment);};i.op_Division=function(L,M){return i.New(function(N){return r.collect(M.Parse,L.Parse(N));},r.append(L.Segment,M.Segment));};i.FromString=function(L){var M,N;M=o.SplitChars(L,["/"],1);return M.length==0?i.New(function(O){return[O];},[]):(N=q.ofArray(M),i.New(function(O){var P;P=h.startsWith(N,O.Segments);return P!=null&&P.$==1?[g.New(P.$0,O.QueryArgs,O.FormData,O.Method,O.Body)]:[];},[g.Segment$1(N)]));};i.New=function(L,M){return{Parse:L,Segment:M};};i.op_Addition$1=function(L,M){return i.New$1(function(N){return r.append(L.Parse(N),M.Parse(N));},function(N){var O;O=L.Write(N);return O==null?M.Write(N):O;});};i.op_Division$1=function(L,M){return i.New$1(function(N){function O(P,Q){return r.map(function(R){return[R,Q];},M.Parse(P));}return r.collect(function(P){return O(P[0],P[1]);},L.Parse(N));},function(N){var O;O=L.Write(N);return O==null?null:{$:1,$0:r.append(O.$0,M.Segment)};});};i.op_Division$2=function(L,M){return i.New$1(function(N){return r.collect(M.Parse,L.Parse(N));},function(N){var O;O=M.Write(N);return O==null?null:{$:1,$0:r.append(L.Segment,O.$0)};});};i.op_Division$3=function(L,M){return i.New$1(function(N){function O(P,Q){function R(S,T){return[S,[Q,T]];}return r.map(function(S){return R(S[0],S[1]);},M.Parse(P));}return r.collect(function(P){return O(P[0],P[1]);},L.Parse(N));},function(N){var O,P,Q;O=L.Write(N[0]);P=M.Write(N[1]);return O!=null&&O.$==1&&(P!=null&&P.$==1&&(Q=[O.$0,P.$0],true))?{$:1,$0:r.append(Q[0],Q[1])}:null;});};i.New$1=function(L,M){return{Parse:L,Write:M};};l=k.ListArrayConverter=w.Class({WebSharper_Sitelets_RouterModule_IListArrayConverter$ToArray:function(L){return u.ofList(L);},WebSharper_Sitelets_RouterModule_IListArrayConverter$OfArray:function(L){return q.ofArray(L);}},j,l);l.New=w.Ctor(function(){j.New.call(this);},l);k.Cast=function(L,M,N){return i.New$1(function(O){function P(Q,R){var S;S=L(R);return S!=null&&S.$==1?{$:1,$0:[Q,S.$0]}:null;}return r.choose(function(Q){return P(Q[0],Q[1]);},N.Parse(O));},function(O){var P;P=M(O);return P==null?null:N.Write(P.$0);});};k.Unbox=function(L,M){return i.New$1(function(N){function O(P,Q){var R;R=L(Q);return R!=null&&R.$==1?{$:1,$0:[P,R.$0]}:null;}return r.choose(function(P){return O(P[0],P[1]);},M.Parse(N));},M.Write);};k.Box=function(L,M){return i.New$1(function(N){function O(P,Q){return[P,Q];}return r.map(function(P){return O(P[0],P[1]);},M.Parse(N));},function(N){var O;O=L(N);return O==null?null:M.Write(O.$0);});};k.List=function(L){return k.Map(q.ofArray,u.ofList,k.Array(L));};k.Option=function(L){return i.New$1(function(M){var N,O;O=M.Segments;function P(Q,R){return[Q,{$:1,$0:R}];}switch(O.$==1?O.$0==="None"?(N=O.$1,0):O.$0==="Some"?(N=O.$1,1):2:2){case 0:return[[g.New(N,M.QueryArgs,M.FormData,M.Method,M.Body),null]];case 1:return r.map(function(Q){return P(Q[0],Q[1]);},L.Parse(g.New(N,M.QueryArgs,M.FormData,M.Method,M.Body)));case 2:return[];}},function(M){var N,O,P;return M!=null&&M.$==1?(N=L.Write(M.$0),(O=(P=[g.Segment$2("Some")],function(Q){return r.append(P,Q);}),N==null?null:{$:1,$0:O(N.$0)})):{$:1,$0:[g.Segment$2("None")]};});};k.Nullable=function(L){return i.New$1(function(M){var N,O;function P(Q,R){return[Q,R];}N=M.Segments;return N.$==1&&(N.$0==="null"&&(O=N.$1,true))?[[g.New(O,M.QueryArgs,M.FormData,M.Method,M.Body),null]]:r.map(function(Q){return P(Q[0],Q[1]);},L.Parse(M));},function(M){return M!=null?L.Write(C.get(M)):{$:1,$0:[g.Segment$2("null")]};});};k.Array=function(L){return i.New$1(function(M){var N,O,P;function Q(R){return function(S){return function(T){function U(V,W){return((Q(R-1))(V))(new q.T({$:1,$0:W,$1:T}));}return R===0?[[S,u.ofList(q.rev(T))]]:r.collect(function(V){return U(V[0],V[1]);},L.Parse(S));};};}N=M.Segments;return N.$==1?(O=(P=0,[D.TryParseInt32(N.$0,{get:function(){return P;},set:function(R){P=R;}}),P]),O[0]?((Q(O[1]))(g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body)))(q.T.Empty):[]):[];},function(M){var N;N=u.map(L.Write,M);return u.forall(function(O){return O!=null;},N)?{$:1,$0:r.append([g.Segment$2(p(u.length(M)))],r.collect(function(O){return O.$0;},N))}:null;});};k.Delay=function(L){var M;M=B.Create(L);return i.New$1(function(N){return M.f().Parse(N);},function(N){return M.f().Write(N);});};k.Single=function(L,M){var N,O;N=o.SplitChars(M,["/"],1);return N.length==0?i.New$1(function(P){return[[P,L]];},function(P){return y.Equals(P,L)?{$:1,$0:[]}:null;}):(O=q.ofArray(N),i.New$1(function(P){var Q;Q=h.startsWith(O,P.Segments);return Q!=null&&Q.$==1?[[g.New(Q.$0,P.QueryArgs,P.FormData,P.Method,P.Body),L]]:[];},function(P){return y.Equals(P,L)?{$:1,$0:[g.Segment$1(O)]}:null;}));};k.Table=function(L){function M(N,O){return k.MapTo(N,i.FromString(O));}return k.Sum(r.map(function(N){return M(N[0],N[1]);},L));};k.Sum=function(L){var M;M=u.ofSeq(L);return i.New$1(function(N){return r.collect(function(O){return O.Parse(N);},M);},function(N){return r.tryPick(function(O){return O.Write(N);},M);});};k.MapTo=function(L,M){return i.New$1(function(N){return r.map(function(O){return[O,L];},M.Parse(N));},function(N){return y.Equals(N,L)?{$:1,$0:M.Segment}:null;});};k.Filter=function(L,M){return i.New$1(function(N){function O(P){return P[1];}return r.filter(function(P){return L(O(P));},M.Parse(N));},function(N){return L(N)?M.Write(N):null;});};k.TryMap=function(L,M,N){return i.New$1(function(O){function P(Q,R){var S;S=L(R);return S==null?null:{$:1,$0:[Q,S.$0]};}return r.choose(function(Q){return P(Q[0],Q[1]);},N.Parse(O));},function(O){var P;P=M(O);return P==null?null:N.Write(P.$0);});};k.Map=function(L,M,N){return i.New$1(function(O){function P(Q,R){return[Q,L(R)];}return r.map(function(Q){return P(Q[0],Q[1]);},N.Parse(O));},function(O){return N.Write(M(O));});};k.Embed=function(L,M,N){return i.New$1(function(O){function P(Q,R){return[Q,L(R)];}return r.map(function(Q){return P(Q[0],Q[1]);},N.Parse(O));},function(O){var P;P=M(O);return P==null?null:N.Write(P.$0);});};k.Slice=function(L,M,N){return i.New$1(function(O){function P(Q,R){var S;S=L(R);return S==null?null:{$:1,$0:[Q,S.$0]};}return r.choose(function(Q){return P(Q[0],Q[1]);},N.Parse(O));},function(O){return N.Write(M(O));});};k.HashLink=function(L,M){return"#"+k.Link(L,M);};k.Fetch=function(L,M){return k.FetchWith(null,{},L,M);};k.FetchWith=function(L,M,N,O){var P,Q,R,S,T,U,V;P=M?M:{};Q=k.Write(N,O);return Q!=null&&Q.$==1?(R=Q.$0,(P.method=(S=R.Method,S==null?"POST":S.$0),T=R.Body.f(),T===null?!R.FormData.get_IsEmpty()?(U=new a.FormData(),t.Iterate(function(W,X){return U.append(W,X);},R.FormData),P.body=U):void 0:P.body=T,V=R.ToLink(),self.fetch(L==null?V:o.TrimEnd(L.$0,["/"])+V,P))):E.FailWith("Failed to map endpoint to request");};k.Ajax=function(L,M){return k.AjaxWith({},L,M);};k.AjaxWith=function(L,M,N){var O,P,Q,R,S,T;O=L?L:{};P=k.Write(M,N);return P!=null&&P.$==1?(Q=P.$0,(O.dataType===void 0?O.dataType="text":void 0,O.type=(R=Q.Method,R==null?"POST":R.$0),S=Q.Body.f(),S===null?!Q.FormData.get_IsEmpty()?(T=new a.FormData(),t.Iterate(function(U,V){return T.append(U,V);},Q.FormData),O.contentType=false,O.data=T,O.processData=false):void 0:(O.contentType="application/json",O.data=S,O.processData=false),F.FromContinuations(function(U,V){var W;O.success=function(X){return U(X);};O.error=function(X,Y,Z){return V(new a.Error(Z));};W=Q.ToLink();O.url=O.url?o.TrimEnd(O.url,["/"])+W:W;G.ajax(O);}))):E.FailWith("Failed to map endpoint to request");};k.Link=function(L,M){var N;N=k.Write(L,M);return N==null?"":N.$0.ToLink();};k.TryLink=function(L,M){var N;N=k.Write(L,M);return N==null?null:{$:1,$0:N.$0.ToLink()};};k.Write=function(L,M){var N;N=L.Write(M);return N==null?null:{$:1,$0:g.Combine(N.$0)};};k.Parse=function(L,M){function N(O,P){return O.Segments.$==0?{$:1,$0:P}:null;}return r.tryPick(function(O){return N(O[0],O[1]);},L.Parse(M));};k.FormData=function(L){return i.New$1(function(M){function N(O,P){return[M,P];}return r.map(function(O){return N(O[0],O[1]);},L.Parse(g.New(M.Segments,M.FormData,M.FormData,M.Method,M.Body)));},function(M){var N;N=L.Write(M);return N==null?null:{$:1,$0:r.map(function(O){return g.New(O.Segments,new x.New([]),O.QueryArgs,O.Method,O.Body);},N.$0)};});};k.Body=function(L,M){return i.New$1(function(N){var O,P;O=N.Body.f();return O===null?[]:(P=L(O),P!=null&&P.$==1?[[g.New(N.Segments,N.QueryArgs,N.FormData,N.Method,B.CreateFromValue(null)),P.$0]]:[]);},function(N){var O;return{$:1,$0:[(O=g.get_Empty(),g.New(O.Segments,O.QueryArgs,O.FormData,O.Method,B.CreateFromValue(M(N))))]};});};k.Method=function(L){var M;return i.New(function(N){var O,P;O=N.Method;return O!=null&&O.$==1&&(O.$0===L&&(P=O.$0,true))?[N]:[];},[(M=g.get_Empty(),g.New(M.Segments,M.QueryArgs,M.FormData,{$:1,$0:L},M.Body))]);};k.QueryNullable=function(L,M){return i.New$1(function(N){var O,P,Q;function R(S,T){return[g.New(N.Segments,P,N.FormData,N.Method,N.Body),T];}O=N.QueryArgs.TryFind(L);return O!=null&&O.$==1?(P=N.QueryArgs.Remove(L),r.map(function(S){return R(S[0],S[1]);},M.Parse((Q=g.get_Empty(),g.New(q.ofArray([O.$0]),Q.QueryArgs,Q.FormData,Q.Method,Q.Body))))):[[N,null]];},function(N){var O,P,Q,R;return N!=null?(O=M.Write(C.get(N)),O==null?null:{$:1,$0:(P=g.Combine(O.$0).Segments,P.$==1&&(P.$1.$==0&&(Q=P.$0,true))?[(R=g.get_Empty(),g.New(R.Segments,t.OfArray(u.ofSeq(q.ofArray([[L,Q]]))),R.FormData,R.Method,R.Body))]:[])}):{$:1,$0:[]};});};k.QueryOption=function(L,M){return i.New$1(function(N){var O,P,Q;function R(S,T){return[g.New(N.Segments,P,N.FormData,N.Method,N.Body),{$:1,$0:T}];}O=N.QueryArgs.TryFind(L);return O!=null&&O.$==1?(P=N.QueryArgs.Remove(L),r.map(function(S){return R(S[0],S[1]);},M.Parse((Q=g.get_Empty(),g.New(q.ofArray([O.$0]),Q.QueryArgs,Q.FormData,Q.Method,Q.Body))))):[[N,null]];},function(N){var O,P,Q,R;return N!=null&&N.$==1?(O=M.Write(N.$0),O==null?null:{$:1,$0:(P=g.Combine(O.$0).Segments,P.$==1&&(P.$1.$==0&&(Q=P.$0,true))?[(R=g.get_Empty(),g.New(R.Segments,t.OfArray(u.ofSeq(q.ofArray([[L,Q]]))),R.FormData,R.Method,R.Body))]:[])}):{$:1,$0:[]};});};k.Query=function(L,M){return i.New$1(function(N){var O,P,Q;function R(S,T){return[g.New(N.Segments,P,N.FormData,N.Method,N.Body),T];}O=N.QueryArgs.TryFind(L);return O!=null&&O.$==1?(P=N.QueryArgs.Remove(L),r.map(function(S){return R(S[0],S[1]);},M.Parse((Q=g.get_Empty(),g.New(q.ofArray([O.$0]),Q.QueryArgs,Q.FormData,Q.Method,Q.Body))))):[];},function(N){var O,P,Q,R;O=M.Write(N);return O==null?null:{$:1,$0:(P=g.Combine(O.$0).Segments,P.$==1&&(P.$1.$==0&&(Q=P.$0,true))?[(R=g.get_Empty(),g.New(R.Segments,t.OfArray(u.ofSeq(q.ofArray([[L,Q]]))),R.FormData,R.Method,R.Body))]:[])};});};k.CreateWithQuery=function(L,M){return i.New$1(function(N){var O;O=M(N.Segments,N.QueryArgs);return O==null?[]:[[g.New(q.T.Empty,N.QueryArgs,N.FormData,N.Method,N.Body),O.$0]];},function(N){var O,P;O=L(N);return{$:1,$0:[(P=g.get_Empty(),g.New(O[0],O[1],P.FormData,P.Method,P.Body))]};});};k.Create=function(L,M){return i.New$1(function(N){var O;O=M(N.Segments);return O==null?[]:[[g.New(q.T.Empty,N.QueryArgs,N.FormData,N.Method,N.Body),O.$0]];},function(N){return{$:1,$0:[g.Segment$1(L(N))]};});};k.New=function(L,M){var N;N={WebSharper_Sitelets_IRouter_1$Route:L,WebSharper_Sitelets_IRouter_1$Link:M};j.New.call(N);return N;};k.Empty=function(){n.$cctor();return n.Empty;};m.JSClass=function(L,M,N,O){var P,Q;function R(U){function V(W,X,Y){var Z;return X?(Z=U[W],y.Equals(Z,void 0)?null:{$:1,$0:Z}):U[W];}return u.map(function(W){return V(W[0],W[1],W[2]);},M);}function S(U){var V;function W(X,Y,Z){return function(_0){if(Y){if(_0!=null&&_0.$==1)V[X]=_0.$0;}else V[X]=_0;};}V=L();(((w.Curried3(u.iter2))(function(X,Y){return(function(Z){return W(Z[0],Z[1],Z[2]);}(X))(Y);}))(M))(U);return V;}function T(U,V){return[U,q.ofSeq(r.map(function(W){return typeof W=="number"?{$:1,$0:[W,(u.get(M,W))[2]]}:{$:0,$0:W};},V))];}P=u.map(function(U){return T(U[0],U[1]);},N);Q=i.New$1(function(U){function V(X,Y,Z){var _0,_1,_2,_3,_4,_5,_6,_7;while(true){if(X.$==1){if(X.$0.$==1){_0=X.$0.$0[1];_1=X.$0.$0[0];_2=X.$1;_3=_0.Parse(Y);return(function(_8){return function(_9){return r.collect(_8,_9);};}(function(_8,_9,_){return function($){var ba;ba=_8.slice();u.set(ba,_9,$[1]);return V(_,$[0],ba);};}(Z,_1,_2)))(_3);}else{_5=X.$0.$0;_6=X.$1;_7=Y.Segments;if(_7.$==1&&(_7.$0===_5&&(_4=[_7.$0,_7.$1],true))){X=_6;Y=g.New(_4[1],Y.QueryArgs,Y.FormData,Y.Method,Y.Body);}else return[];}}else return[[Y,S(Z)]];}}function W(X,Y){return m.isCorrectMethod(X,U.Method)?V(Y,U,u.create(u.length(M),null)):[];}return r.collect(function(X){return W(X[0],X[1]);},P);},function(U){var V,W,X,Y,Z,_0;V=R(U);W=u.get(N,0);X=W[0];Y=u.map(function(_1){return typeof _1=="number"?(u.get(M,_1))[2].Write(u.get(V,_1)):{$:1,$0:[g.Segment$2(_1)]};},W[1]);return u.forall(function(_1){return _1!=null;},Y)?(Z=r.collect(function(_1){return _1.$0;},Y),X==null?{$:1,$0:Z}:{$:1,$0:r.append([(_0=g.get_Empty(),g.New(_0.Segments,_0.QueryArgs,_0.FormData,X,_0.Body))],Z)}):null;});return O.length==0?Q:k.Sum(r.append(O,[Q]));};m.JSUnion=function(L,M){var N;function O(S){var T;function U(V){return V!=null&&V.$==1&&y.Equals(S,V.$0);}T=r.tryFindIndex(function(V){return U(V[0]);},M);return T!=null&&T.$==1?T.$0:S.$;}function P(S,T){return u.init(u.length((u.get(M,S))[2]),function(U){return T["$"+p(U)];});}function Q(S,T){var U,V,W;U=L==null?{}:new L();V=u.get(M,S);return(W=V[0],W!=null&&W.$==1)?V[0].$0:(U.$=S,r.iteri(function(X,Y){U["$"+p(X)]=Y;},T),U);}function R(S,T){var U;function V(W,X){return[S,W,X,U];}U=T[2];return r.map(function(W){return V(W[0],W[1]);},T[1]);}N=r.collect(function(S){return R(S[0],S[1]);},r.indexed(M));return i.New$1(function(S){function T(U,V,W,X){var Y,Z,_0;function _1(_2){return function(_3){return function(_4){var _5;function _6(_7,_8){return((_1(_5))(_7))(new q.T({$:1,$0:_8,$1:_4}));}return _2.$==1?(_5=_2.$1,r.collect(function(_7){return _6(_7[0],_7[1]);},_2.$0.Parse(_3))):[[_3,Q(U,u.ofList(q.rev(_4)))]];};};}return m.isCorrectMethod(V,S.Method)?(Y=h.startsWith(q.ofArray(W),S.Segments),Y==null?[]:(Z=Y.$0,(_0=q.ofArray(X),_0.$==0?[[g.New(Z,S.QueryArgs,S.FormData,S.Method,S.Body),Q(U,[])]]:((_1(_0))(g.New(Z,S.QueryArgs,S.FormData,S.Method,S.Body)))(q.T.Empty)))):[];}return r.collect(function(U){return T(U[0],U[1],U[2],U[3]);},N);},function(S){var T,U,V,W,X,Y;function Z(_0,_1){return _1.Write(_0);}T=O(S);U=u.get(M,T);V=U[2];W=u.get(U[1],0);X=[g.Segment(q.ofArray(W[1]),W[0])];return!y.Equals(V,null)&&V.length===0?{$:1,$0:X}:(Y=(((w.Curried3(u.map2))(Z))(P(T,S)))(V),u.forall(function(_0){return _0!=null;},Y)?{$:1,$0:r.append(X,r.collect(function(_0){return _0.$0;},Y))}:null);});};m.isCorrectMethod=function(L,M){return M!=null&&M.$==1?L!=null&&L.$==1?y.Equals(M.$0,L.$0):true:!(L!=null&&L.$==1);};m.JSRecord=function(L,M){var N,O;function P(S){function T(U,V,W){var X;return V?(X=S[U],y.Equals(X,void 0)?null:{$:1,$0:X}):S[U];}return u.map(function(U){return T(U[0],U[1],U[2]);},M);}function Q(S){var T;function U(V,W,X){return function(Y){if(W){if(Y!=null&&Y.$==1)T[V]=Y.$0;}else T[V]=Y;};}T=L==null?{}:new L();(((w.Curried3(u.iter2))(function(V,W){return(function(X){return U(X[0],X[1],X[2]);}(V))(W);}))(M))(S);return T;}function R(S,T,U){return U;}N=u.map(function(S){return R(S[0],S[1],S[2]);},M);O=q.ofArray(N);return i.New$1(function(S){function T(U){return function(V){return function(W){var X;function Y(Z,_0){return((T(X))(Z))(new q.T({$:1,$0:_0,$1:W}));}return U.$==1?(X=U.$1,r.collect(function(Z){return Y(Z[0],Z[1]);},U.$0.Parse(V))):[[V,Q(u.ofList(q.rev(W)))]];};};}return((T(O))(S))(q.T.Empty);},function(S){var T;function U(V,W){return W.Write(V);}T=(((w.Curried3(u.map2))(U))(P(S)))(N);return u.forall(function(V){return V!=null;},T)?{$:1,$0:r.collect(function(V){return V.$0;},T)}:null;});};m.JSTuple=function(L){return m.Tuple(function(M){return u.init(u.length(L),function(N){return M[N];});},a.id,L);};m.Tuple=function(L,M,N){return i.New$1(function(O){function P(Q){return function(R){return function(S){var T;function U(V,W){return((P(T))(V))(new q.T({$:1,$0:W,$1:S}));}return Q.$==1?(T=Q.$1,r.collect(function(V){return U(V[0],V[1]);},Q.$0.Parse(R))):[[R,M(u.ofList(q.rev(S)))]];};};}return((P(q.ofArray(N)))(O))(q.T.Empty);},function(O){var P;function Q(R,S){return S.Write(R);}P=(((w.Curried3(u.map2))(Q))(L(O)))(N);return u.forall(function(R){return R!=null;},P)?{$:1,$0:r.collect(function(R){return R.$0;},P)}:null;});};m.rCors=function(L){return i.New$1(function(M){function N(O,P){var Q,R;return[O,w.DeleteEmptyFields({DefaultAllows:(Q=null,Q?Q.$0:void 0),EndPoint:(R={$:1,$0:P},R?R.$0:void 0)},["DefaultAllows","EndPoint"])];}return r.map(function(O){return N(O[0],O[1]);},L.Parse(M));},function(M){var N,O;N=(O=w.GetOptional(M.EndPoint),O==null?{$:1,$0:null}:{$:0,$0:O.$0});return N.$==1?{$:1,$0:[g.get_Empty()]}:L.Write(N.$0);});};m.rDateTime=function(){n.$cctor();return n.rDateTime;};m.rWildcardList=function(L){return i.New$1(function(M){function N(O){return function(P){function Q(R,S){return(N(R))(new q.T({$:1,$0:S,$1:P}));}return O.Segments.$==0?[[O,q.rev(P)]]:r.collect(function(R){return Q(R[0],R[1]);},L.Parse(O));};}return(N(M))(q.T.Empty);},function(M){var N;N=q.map(L.Write,M);return q.forAll(function(O){return O!=null;},N)?{$:1,$0:r.collect(function(O){return O.$0;},N)}:null;});};m.rWildcardArray=function(L){return i.New$1(function(M){function N(O){return function(P){function Q(R,S){return(N(R))(new q.T({$:1,$0:S,$1:P}));}return O.Segments.$==0?[[O,u.ofList(q.rev(P))]]:r.collect(function(R){return Q(R[0],R[1]);},L.Parse(O));};}return(N(M))(q.T.Empty);},function(M){var N;N=u.map(L.Write,M);return u.forall(function(O){return O!=null;},N)?{$:1,$0:r.collect(function(O){return O.$0;},N)}:null;});};m.rWildcard=function(){n.$cctor();return n.rWildcard;};m.rBool=function(){n.$cctor();return n.rBool;};m.rSingle=function(){n.$cctor();return n.rSingle;};m.rUInt64=function(){n.$cctor();return n.rUInt64;};m.rInt64=function(){n.$cctor();return n.rInt64;};m.rUInt=function(){n.$cctor();return n.rUInt;};m.rUInt16=function(){n.$cctor();return n.rUInt16;};m.rInt16=function(){n.$cctor();return n.rInt16;};m.rByte=function(){n.$cctor();return n.rByte;};m.rSByte=function(){n.$cctor();return n.rSByte;};m.rDouble=function(){n.$cctor();return n.rDouble;};m.rInt=function(){n.$cctor();return n.rInt;};m.rGuid=function(){n.$cctor();return n.rGuid;};m.rChar=function(){n.$cctor();return n.rChar;};m.rString=function(){n.$cctor();return n.rString;};m.rRoot=function(){n.$cctor();return n.rRoot;};n.$cctor=function(){n.$cctor=a.ignore;function L(M){var N,O;N=(O=0,[D.TryParseInt32(M,{get:function(){return O;},set:function(P){O=P;}}),O]);return N[0]?{$:1,$0:N[1]}:null;}n.Empty=i.New$1(function(){return[];},function(){return null;});n.rRoot=i.New(function(M){return[M];},[]);n.rString=i.New$1(function(M){var N,O;N=M.Segments;return N.$==0?[[M,""]]:(O=e.read(N.$0),O!=null&&O.$==1?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O.$0]]:[]);},function(M){return{$:1,$0:[g.Segment$2(M==null?"null":e.write(M))]};});n.rChar=i.New$1(function(M){var N,O,P;N=M.Segments;return N.$==1?(O=e.read(N.$0),O!=null&&O.$==1&&(O.$0.length===1&&(P=O.$0,true))?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),H.Parse(P)]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(M)]};});n.rGuid=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=null,J.TryParse(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rInt=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=0,D.TryParseInt32(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rDouble=i.New$1(function(M){var N,O,P;N=M.Segments;return N.$==1?(O=0,(P=a.Number(N.$0),a.isNaN(P)?false:(O=P,true))?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rSByte=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=0,D.TryParseSByte(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rByte=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=0,D.TryParseByte(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rInt16=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=0,D.TryParseInt16(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rUInt16=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=0,D.TryParseUInt16(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rUInt=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=0,D.TryParseUInt32(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rInt64=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=0,D.TryParseInt64(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rUInt64=i.New$1(function(M){var N,O;N=M.Segments;return N.$==1?(O=0,D.TryParseUInt64(N.$0,{get:function(){return O;},set:function(P){O=P;}})?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rSingle=i.New$1(function(M){var N,O,P;N=M.Segments;return N.$==1?(O=0,(P=a.Number(N.$0),a.isNaN(P)?false:(O=P,true))?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(p(M))]};});n.rBool=i.New$1(function(M){var N,O,P;N=M.Segments;return N.$==1?(O=(P=null,[D.TryParseBool(N.$0,{get:function(){return P;},set:function(Q){P=Q;}}),P]),O[0]?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),O[1]]]:[]):[];},function(M){return{$:1,$0:[g.Segment$2(M?"True":"False")]};});n.rWildcard=i.New$1(function(M){return[[g.New(q.T.Empty,M.QueryArgs,M.FormData,M.Method,M.Body),o.concat("/",M.Segments)]];},function(M){return{$:1,$0:[g.Segment$2(M)]};});n.rDateTime=i.New$1(function(M){var N,O,P,Q,R,S,T,U,V;N=M.Segments;return N.$==1?(O=N.$0,O.length===19&&O[4]==="-"&&O[7]==="-"&&O[10]==="-"&&O[13]==="."&&O[16]==="."?(P=L(K.string(O,{$:1,$0:0},{$:1,$0:3})),(Q=L(K.string(O,{$:1,$0:5},{$:1,$0:6})),(R=L(K.string(O,{$:1,$0:8},{$:1,$0:9})),(S=L(K.string(O,{$:1,$0:11},{$:1,$0:12})),(T=L(K.string(O,{$:1,$0:14},{$:1,$0:15})),(U=L(K.string(O,{$:1,$0:17},{$:1,$0:18})),P!=null&&P.$==1&&(Q!=null&&Q.$==1&&(R!=null&&R.$==1&&(S!=null&&S.$==1&&(T!=null&&T.$==1&&(U!=null&&U.$==1&&(V=[R.$0,S.$0,Q.$0,T.$0,U.$0,P.$0],true))))))?[[g.New(N.$1,M.QueryArgs,M.FormData,M.Method,M.Body),(new a.Date(V[5],V[2]-1,V[0],V[1],V[3],V[4])).getTime()]]:[])))))):[]):[];},function(M){var N,O;function P(Q){var R;R=p(Q);return R.length===1?"0"+R:R;}return{$:1,$0:[g.Segment$2((N=p((new a.Date(M)).getFullYear()),(O=N.length,O===1?"000"+N:O===2?"00"+N:O===3?"0"+N:N))+"-"+P((new a.Date(M)).getMonth()+1)+"-"+P((new a.Date(M)).getDate())+"-"+P((new a.Date(M)).getHours())+"."+P((new a.Date(M)).getMinutes())+"."+P((new a.Date(M)).getSeconds()))]};});};}());
